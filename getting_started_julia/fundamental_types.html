
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>4. Arrays, Tuples, Ranges, and Other Fundamental Types &#8212; Quantitative Economics with Julia</title>
    <script src="https://unpkg.com/@popperjs/core@2.9.2/dist/umd/popper.min.js"></script>
    <script src="https://unpkg.com/tippy.js@6.3.1/dist/tippy-bundle.umd.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/feather-icons/dist/feather.min.js"></script>
    
        <script>
            MathJax = {
            loader: {load: ['[tex]/boldsymbol']},
            tex: {
                packages: {'[+]': ['boldsymbol']},
                inlineMath: [['$', '$'], ['\\(', '\\)']],
                processEscapes: true,
                macros: {
                    "argmax" : "arg\\,max",
                    "argmin" : "arg\\,min",
                    "col"    : "col",
                    "Span"   :  "span",
                    "epsilon": "\\varepsilon",
                    "EE": "\\mathbb{E}",
                    "PP": "\\mathbb{P}",
                    "RR": "\\mathbb{R}",
                    "NN": "\\mathbb{N}",
                    "ZZ": "\\mathbb{Z}",
                    "aA": "\\mathcal{A}",
                    "bB": "\\mathcal{B}",
                    "cC": "\\mathcal{C}",
                    "dD": "\\mathcal{D}",
                    "eE": "\\mathcal{E}",
                    "fF": "\\mathcal{F}",
                    "gG": "\\mathcal{G}",
                    "hH": "\\mathcal{H}",
                }
            },
            svg: {
                fontCache: 'global',
                scale: 0.92,
                displayAlign: "center",
            },
            };
        </script>
    
    
    
  <link href="../_static/css/theme.css" rel="stylesheet" />
  <link href="../_static/css/index.c5995385ac14fb8791e8eb36b4908be2.css" rel="stylesheet" />

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/quantecon-book-theme.857ff391aaabaeb8c161d2309c375fe6.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="../_static/js/index.1c5a1a01449ed65a7b51.js">


    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/togglebutton.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../_static/sphinx-book-theme.12a9622fbb08dcb3a2a40b2c02b83a57.js"></script>
    <script src="../_static/quantecon-book-theme.76bf49d7bbc59738cdb03766fad654af.js"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-svg.js"></script>
    <script type="text/x-mathjax-config">MathJax.Hub.Config({"TeX": {"Macros": {"argmax": "arg\\,max", "argmin": "arg\\,min"}}, "tex2jax": {"inlineMath": [["\\(", "\\)"]], "displayMath": [["\\[", "\\]"]], "processRefs": false, "processEnvironments": false}})</script>
    <script async="async" src="https://unpkg.com/thebe@0.5.1/lib/index.js"></script>
    <script >
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <link rel="canonical" href="https://julia.quantecon.org/getting_started_julia/fundamental_types.html" />
    <link rel="shortcut icon" href="../_static/lectures-favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="5. Introduction to Types and Generic Programming" href="introduction_to_types.html" />
    <link rel="prev" title="3. Julia Essentials" href="julia_essentials.html" />

<!-- Normal Meta Tags -->
<meta name="author" context="Jesse Perla &amp; Thomas J. Sargent &amp; John Stachurski" />
<meta name="keywords" content="Julia, QuantEcon, Quantitative Economics, Economics, Sloan, Alfred P. Sloan Foundation, Tom J. Sargent, John Stachurski" />
<meta name="description" content=This website presents a set of lectures on quantitative economic modeling, designed and written by Jesse Perla, Thomas J. Sargent and John Stachurski. The language instruction is Julia. />

<!-- Twitter tags -->
<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="@quantecon" />
<meta name="twitter:title" content="Arrays, Tuples, Ranges, and Other Fundamental Types"/>
<meta name="twitter:description" content="This website presents a set of lectures on quantitative economic modeling, designed and written by Jesse Perla, Thomas J. Sargent and John Stachurski. The language instruction is Julia.">
<meta name="twitter:creator" content="@quantecon">
<meta name="twitter:image" content="https://assets.quantecon.org/img/qe-twitter-logo.png">

<!-- Opengraph tags -->
<meta property="og:title" content="Arrays, Tuples, Ranges, and Other Fundamental Types" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://julia.quantecon.org/getting_started_julia/fundamental_types.html" />
<meta property="og:image" content="https://assets.quantecon.org/img/qe-og-logo.png" />
<meta property="og:description" content="This website presents a set of lectures on quantitative economic modeling, designed and written by Jesse Perla, Thomas J. Sargent and John Stachurski. The language instruction is Julia." />
<meta property="og:site_name" content="Quantitative Economics with Julia" />
<meta name="theme-color" content="#ffffff" />

  </head>
<body>


    <span id="top"></span>

    <div class="wrapper">

        <div class="main">

            <div class="page" id=getting_started_julia/fundamental_types>

                <div class="page__toc">

                    <div class="inner">

                        
                        <div class="page__toc-header">
                            On this page
                        </div>


                        <nav id="bd-toc-nav" class="page__toc-nav">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#overview">
   4.1. Overview
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#array-basics">
   4.2. Array Basics
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#shape-and-dimension">
     4.2.1. Shape and Dimension
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#array-vs-vector-vs-matrix">
       4.2.1.1. Array vs Vector vs Matrix
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#creating-arrays">
     4.2.2. Creating Arrays
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#functions-that-create-arrays">
       4.2.2.1. Functions that Create Arrays
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#creating-arrays-from-existing-arrays">
       4.2.2.2. Creating Arrays from Existing Arrays
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#manual-array-definitions">
       4.2.2.3. Manual Array Definitions
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#array-indexing">
     4.2.3. Array Indexing
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#views-and-slices">
     4.2.4. Views and Slices
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#special-matrices">
     4.2.5. Special Matrices
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#assignment-and-passing-arrays">
     4.2.6. Assignment and Passing Arrays
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#in-place-and-immutable-types">
     4.2.7. In-place and Immutable Types
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#operations-on-arrays">
   4.3. Operations on Arrays
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#array-methods">
     4.3.1. Array Methods
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#matrix-algebra">
     4.3.2. Matrix Algebra
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#elementwise-operations">
     4.3.3. Elementwise Operations
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#algebraic-operations">
       4.3.3.1. Algebraic Operations
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#elementwise-comparisons">
       4.3.3.2. Elementwise Comparisons
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#changing-dimensions">
       4.3.3.3. Changing Dimensions
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#broadcasting-functions">
     4.3.4. Broadcasting Functions
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#linear-algebra">
     4.3.5. Linear Algebra
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#ranges">
   4.4. Ranges
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#tuples-and-named-tuples">
   4.5. Tuples and Named Tuples
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#nothing-missing-and-unions">
   4.6. Nothing, Missing, and Unions
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#nothing-and-basic-error-handling">
     4.6.1. Nothing and Basic Error Handling
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#exceptions">
     4.6.2. Exceptions
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#missing">
     4.6.3. Missing
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#exercises">
   4.7. Exercises
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#exercise-1">
     4.7.1. Exercise 1
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#exercise-2">
     4.7.2. Exercise 2
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#exercise-3">
     4.7.3. Exercise 3
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#exercise-4">
     4.7.4. Exercise 4
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#solutions">
   4.8. Solutions
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id3">
     4.8.1. Exercise 1
    </a>
   </li>
  </ul>
 </li>
</ul>

                            <p class="logo">
                                
                                    
                                    <a href=https://quantecon.org><img src="../_static/qe-logo-large.png" class="logo" alt="logo"></a>
                                    
                                
                            </p>

                            <p class="powered">Powered by <a href="https://jupyterbook.org/">Jupyter Book</a></p>

                        </nav>

                        <div class="page__toc-footer">
                            
                            
                            <p><a href="#top"><strong>Back to top</strong></a></p>
                        </div>

                    </div>

                </div>

                <div class="page__header">

                    <div class="page__header-copy">

                        <p class="page__header-heading"><a href="../intro.html">Quantitative Economics with Julia</a></p>

                        <p class="page__header-subheading">Arrays, Tuples, Ranges, and Other Fundamental Types</p>

                    </div>

                    <p class="page__header-authors">Jesse Perla & Thomas J. Sargent & John Stachurski</p>

                </div> <!-- .page__header -->



                
                <main class="page__content" role="main">
                    
                    <div>
                        
  <div id="qe-notebook-header" style="text-align:right;">
        <a href="https://quantecon.org/" title="quantecon.org">
                <img style="width:250px;display:inline;" src="https://assets.quantecon.org/img/qe-menubar-logo.svg" alt="QuantEcon">
        </a>
</div><div class="section" id="arrays-tuples-ranges-and-other-fundamental-types">
<h1><a class="toc-backref" href="#id4"><span class="section-number">4. </span>Arrays, Tuples, Ranges, and Other Fundamental Types</a><a class="headerlink" href="#arrays-tuples-ranges-and-other-fundamental-types" title="Permalink to this headline">¶</a></h1>
<div class="contents topic" id="contents">
<p class="topic-title">Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#arrays-tuples-ranges-and-other-fundamental-types" id="id4">Arrays, Tuples, Ranges, and Other Fundamental Types</a></p>
<ul>
<li><p><a class="reference internal" href="#overview" id="id5">Overview</a></p></li>
<li><p><a class="reference internal" href="#array-basics" id="id6">Array Basics</a></p></li>
<li><p><a class="reference internal" href="#operations-on-arrays" id="id7">Operations on Arrays</a></p></li>
<li><p><a class="reference internal" href="#ranges" id="id8">Ranges</a></p></li>
<li><p><a class="reference internal" href="#tuples-and-named-tuples" id="id9">Tuples and Named Tuples</a></p></li>
<li><p><a class="reference internal" href="#nothing-missing-and-unions" id="id10">Nothing, Missing, and Unions</a></p></li>
<li><p><a class="reference internal" href="#exercises" id="id11">Exercises</a></p></li>
<li><p><a class="reference internal" href="#solutions" id="id12">Solutions</a></p></li>
</ul>
</li>
</ul>
</div>
<blockquote class="epigraph">
<div><p>“Let’s be clear: the work of science has nothing whatever to do with consensus.
Consensus is the business of politics. Science, on the contrary, requires only
one investigator who happens to be right, which means that he or she has
results that are verifiable by reference to the real world. In science
consensus is irrelevant. What is relevant is reproducible results.” – Michael Crichton</p>
</div></blockquote>
<div class="section" id="overview">
<h2><a class="toc-backref" href="#id5"><span class="section-number">4.1. </span>Overview</a><a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>In Julia, arrays and tuples are the most important data type for working with numerical data.</p>
<p>In this lecture we give more details on</p>
<ul class="simple">
<li><p>creating and manipulating Julia arrays</p></li>
<li><p>fundamental array processing operations</p></li>
<li><p>basic matrix algebra</p></li>
<li><p>tuples and named tuples</p></li>
<li><p>ranges</p></li>
<li><p>nothing, missing, and unions</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="k">using</span> <span class="n">LinearAlgebra</span><span class="p">,</span> <span class="n">Statistics</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="array-basics">
<h2><a class="toc-backref" href="#id6"><span class="section-number">4.2. </span>Array Basics</a><a class="headerlink" href="#array-basics" title="Permalink to this headline">¶</a></h2>
<p>(<a class="reference external" href="https://docs.julialang.org/en/v1/manual/arrays/">See multi-dimensional arrays documentation</a>)</p>
<p>Since it is one of the most important types, we will start with arrays.</p>
<p>Later, we will see how arrays (and all other types in Julia) are handled in a generic and extensible way.</p>
<div class="section" id="shape-and-dimension">
<h3><span class="section-number">4.2.1. </span>Shape and Dimension<a class="headerlink" href="#shape-and-dimension" title="Permalink to this headline">¶</a></h3>
<p>We’ve already seen some Julia arrays in action</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">30</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>3-element Vector{Int64}:
 10
 20
 30
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>3-element Vector{Float64}:
 1.0
 2.0
 3.0
</pre></div>
</div>
</div>
</div>
<p>The output tells us that the arrays are of types <code class="docutils literal notranslate"><span class="pre">Array{Int64,1}</span></code> and <code class="docutils literal notranslate"><span class="pre">Array{Float64,1}</span></code> respectively.</p>
<p>Here <code class="docutils literal notranslate"><span class="pre">Int64</span></code> and <code class="docutils literal notranslate"><span class="pre">Float64</span></code> are types for the elements inferred by the compiler.</p>
<p>We’ll talk more about types later.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">1</span></code> in <code class="docutils literal notranslate"><span class="pre">Array{Int64,1}</span></code> and <code class="docutils literal notranslate"><span class="pre">Array{Any,1}</span></code> indicates that the array is
one dimensional (i.e., a <code class="docutils literal notranslate"><span class="pre">Vector</span></code>).</p>
<p>This is the default for many Julia functions that create arrays</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="n">typeof</span><span class="p">(</span><span class="n">randn</span><span class="p">(</span><span class="mi">100</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Vector{Float64} (alias for Array{Float64, 1})
</pre></div>
</div>
</div>
</div>
<p>In Julia, one dimensional vectors are best interpreted as column vectors, which we will see when we take transposes.</p>
<p>We can check the dimensions of <code class="docutils literal notranslate"><span class="pre">a</span></code> using <code class="docutils literal notranslate"><span class="pre">size()</span></code> and <code class="docutils literal notranslate"><span class="pre">ndims()</span></code>
functions</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="n">ndims</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>1
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="n">size</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(3,)
</pre></div>
</div>
</div>
</div>
<p>The syntax <code class="docutils literal notranslate"><span class="pre">(3,)</span></code> displays a tuple containing one element – the size along the one dimension that exists.</p>
<div class="section" id="array-vs-vector-vs-matrix">
<h4><span class="section-number">4.2.1.1. </span>Array vs Vector vs Matrix<a class="headerlink" href="#array-vs-vector-vs-matrix" title="Permalink to this headline">¶</a></h4>
<p>In Julia, <code class="docutils literal notranslate"><span class="pre">Vector</span></code> and <code class="docutils literal notranslate"><span class="pre">Matrix</span></code> are just aliases for one- and two-dimensional arrays
respectively</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="kt">Array</span><span class="p">{</span><span class="kt">Int64</span><span class="p">,</span> <span class="mi">1</span><span class="p">}</span> <span class="o">==</span> <span class="kt">Vector</span><span class="p">{</span><span class="kt">Int64</span><span class="p">}</span>
<span class="kt">Array</span><span class="p">{</span><span class="kt">Int64</span><span class="p">,</span> <span class="mi">2</span><span class="p">}</span> <span class="o">==</span> <span class="kt">Matrix</span><span class="p">{</span><span class="kt">Int64</span><span class="p">}</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>true
</pre></div>
</div>
</div>
</div>
<p>Vector construction with <code class="docutils literal notranslate"><span class="pre">,</span></code> is then interpreted as a column vector.</p>
<p>To see this, we can create a column vector and row vector more directly</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span> <span class="o">==</span> <span class="p">[</span><span class="mi">1</span><span class="p">;</span> <span class="mi">2</span><span class="p">;</span> <span class="mi">3</span><span class="p">]</span>  <span class="c"># both column vectors</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>true
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span><span class="p">]</span>  <span class="c"># a row vector is 2-dimensional</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>1×3 Matrix{Int64}:
 1  2  3
</pre></div>
</div>
</div>
</div>
<p>As we’ve seen, in Julia we have both</p>
<ul class="simple">
<li><p>one-dimensional arrays (i.e., flat arrays)</p></li>
<li><p>arrays of size <code class="docutils literal notranslate"><span class="pre">(1,</span> <span class="pre">n)</span></code> or <code class="docutils literal notranslate"><span class="pre">(n,</span> <span class="pre">1)</span></code> that represent row and column vectors respectively</p></li>
</ul>
<p>Why do we need both?</p>
<p>On one hand, dimension matters for matrix algebra.</p>
<ul class="simple">
<li><p>Multiplying by a row vector is different to multiplying by a column vector.</p></li>
</ul>
<p>On the other, we use arrays in many settings that don’t involve matrix algebra.</p>
<p>In such cases, we don’t care about the distinction between row and column vectors.</p>
<p>This is why many Julia functions return flat arrays by default.</p>
</div>
</div>
<div class="section" id="creating-arrays">
<span id="id1"></span><h3><span class="section-number">4.2.2. </span>Creating Arrays<a class="headerlink" href="#creating-arrays" title="Permalink to this headline">¶</a></h3>
<div class="section" id="functions-that-create-arrays">
<h4><span class="section-number">4.2.2.1. </span>Functions that Create Arrays<a class="headerlink" href="#functions-that-create-arrays" title="Permalink to this headline">¶</a></h4>
<p>We’ve already seen some functions for creating a vector filled with <code class="docutils literal notranslate"><span class="pre">0.0</span></code></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="n">zeros</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>3-element Vector{Float64}:
 0.0
 0.0
 0.0
</pre></div>
</div>
</div>
</div>
<p>This generalizes to matrices and higher dimensional arrays</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="n">zeros</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2×2 Matrix{Float64}:
 0.0  0.0
 0.0  0.0
</pre></div>
</div>
</div>
</div>
<p>To return an array filled with a single value, use <code class="docutils literal notranslate"><span class="pre">fill</span></code></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="n">fill</span><span class="p">(</span><span class="mf">5.0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2×2 Matrix{Float64}:
 5.0  5.0
 5.0  5.0
</pre></div>
</div>
</div>
</div>
<p>Finally, you can create an empty array using the <code class="docutils literal notranslate"><span class="pre">Array()</span></code> constructor</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">=</span> <span class="kt">Array</span><span class="p">{</span><span class="kt">Float64</span><span class="p">}(</span><span class="nb">undef</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2×2 Matrix{Float64}:
 6.92399e-310  6.92399e-310
 6.92399e-310  1.5e-323
</pre></div>
</div>
</div>
</div>
<p>The printed values you see here are just garbage values.</p>
<p>(the existing contents of the allocated memory slots being interpreted as 64 bit floats)</p>
<p>If you need more control over the types, fill with a non-floating point</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="n">fill</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>  <span class="c"># fills with 0, not 0.0</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2×2 Matrix{Int64}:
 0  0
 0  0
</pre></div>
</div>
</div>
</div>
<p>Or fill with a boolean type</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="n">fill</span><span class="p">(</span><span class="nb">false</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>  <span class="c"># produces a boolean matrix</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2×2 Matrix{Bool}:
 0  0
 0  0
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="creating-arrays-from-existing-arrays">
<h4><span class="section-number">4.2.2.2. </span>Creating Arrays from Existing Arrays<a class="headerlink" href="#creating-arrays-from-existing-arrays" title="Permalink to this headline">¶</a></h4>
<p>For the most part, we will avoid directly specifying the types of arrays, and let the compiler deduce the optimal types on its own.</p>
<p>The reasons for this, discussed in more detail in <a class="reference internal" href="../more_julia/generic_programming.html"><span class="doc">this lecture</span></a>, are to ensure both clarity and generality.</p>
<p>One place this can be inconvenient is when we need to create an array based on an existing array.</p>
<p>First, note that assignment in Julia binds a name to a value, but does not make a copy of that type</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">x</span>
<span class="n">y</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">2</span>
<span class="n">x</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>3-element Vector{Int64}:
 2
 2
 3
</pre></div>
</div>
</div>
</div>
<p>In the above, <code class="docutils literal notranslate"><span class="pre">y</span> <span class="pre">=</span> <span class="pre">x</span></code> simply creates a new named binding called <code class="docutils literal notranslate"><span class="pre">y</span></code> which refers to whatever <code class="docutils literal notranslate"><span class="pre">x</span></code> currently binds to.</p>
<p>To copy the data, you need to be more explicit</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">copy</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="n">y</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">2</span>
<span class="n">x</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>3-element Vector{Int64}:
 1
 2
 3
</pre></div>
</div>
</div>
</div>
<p>However, rather than making a copy of <code class="docutils literal notranslate"><span class="pre">x</span></code>, you may want to just have a similarly sized array</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">similar</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="n">y</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>3-element Vector{Int64}:
 140143698638064
 140143540953184
 140143540925744
</pre></div>
</div>
</div>
</div>
<p>We can also use <code class="docutils literal notranslate"><span class="pre">similar</span></code> to pre-allocate a vector with a different size, but the same shape</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">similar</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>  <span class="c"># make a vector of length 4</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>4-element Vector{Int64}:
 140143540937776
 140143014109664
 140143670748560
 140143043992577
</pre></div>
</div>
</div>
</div>
<p>Which generalizes to higher dimensions</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">similar</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>  <span class="c"># make a 2x2 matrix</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2×2 Matrix{Int64}:
 140143635903888  140143633473568
               0  140143633273552
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="manual-array-definitions">
<h4><span class="section-number">4.2.2.3. </span>Manual Array Definitions<a class="headerlink" href="#manual-array-definitions" title="Permalink to this headline">¶</a></h4>
<p>As we’ve seen, you can create one dimensional arrays from manually specified data like so</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">40</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>4-element Vector{Int64}:
 10
 20
 30
 40
</pre></div>
</div>
</div>
</div>
<p>In two dimensions we can proceed as follows</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">10</span> <span class="mi">20</span> <span class="mi">30</span> <span class="mi">40</span><span class="p">]</span>  <span class="c"># two dimensional, shape is 1 x n</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>1×4 Matrix{Int64}:
 10  20  30  40
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="n">ndims</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">10</span> <span class="mi">20</span><span class="p">;</span> <span class="mi">30</span> <span class="mi">40</span><span class="p">]</span>  <span class="c"># 2 x 2</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2×2 Matrix{Int64}:
 10  20
 30  40
</pre></div>
</div>
</div>
</div>
<p>You might then assume that <code class="docutils literal notranslate"><span class="pre">a</span> <span class="pre">=</span> <span class="pre">[10;</span> <span class="pre">20;</span> <span class="pre">30;</span> <span class="pre">40]</span></code> creates a two dimensional column vector but this isn’t the case.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">10</span><span class="p">;</span> <span class="mi">20</span><span class="p">;</span> <span class="mi">30</span><span class="p">;</span> <span class="mi">40</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>4-element Vector{Int64}:
 10
 20
 30
 40
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="n">ndims</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>1
</pre></div>
</div>
</div>
</div>
<p>Instead transpose the matrix (or adjoint if complex)</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">10</span> <span class="mi">20</span> <span class="mi">30</span> <span class="mi">40</span><span class="p">]</span><span class="o">&#39;</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>4×1 adjoint(::Matrix{Int64}) with eltype Int64:
 10
 20
 30
 40
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="n">ndims</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="section" id="array-indexing">
<h3><span class="section-number">4.2.3. </span>Array Indexing<a class="headerlink" href="#array-indexing" title="Permalink to this headline">¶</a></h3>
<p>We’ve already seen the basics of array indexing</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">10</span> <span class="mi">20</span> <span class="mi">30</span> <span class="mi">40</span><span class="p">]</span>
<span class="n">a</span><span class="p">[</span><span class="k">end</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>30
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="n">a</span><span class="p">[</span><span class="mi">1</span><span class="o">:</span><span class="mi">3</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>3-element Vector{Int64}:
 10
 20
 30
</pre></div>
</div>
</div>
</div>
<p>For 2D arrays the index syntax is straightforward</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="n">randn</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">a</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>1.4344261611487727
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="n">a</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="o">:</span><span class="p">]</span>  <span class="c"># first row</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2-element Vector{Float64}:
  1.4344261611487727
 -0.1751077237627583
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="n">a</span><span class="p">[</span><span class="o">:</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>  <span class="c"># first column</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2-element Vector{Float64}:
 1.4344261611487727
 1.1280280389840946
</pre></div>
</div>
</div>
</div>
<p>Booleans can be used to extract elements</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="n">randn</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2×2 Matrix{Float64}:
  1.4436    -0.0591118
 -0.602495   2.03598
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="n">b</span> <span class="o">=</span> <span class="p">[</span><span class="nb">true</span> <span class="nb">false</span><span class="p">;</span> <span class="nb">false</span> <span class="nb">true</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2×2 Matrix{Bool}:
 1  0
 0  1
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="n">a</span><span class="p">[</span><span class="n">b</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2-element Vector{Float64}:
 1.4436013719860359
 2.0359790873299004
</pre></div>
</div>
</div>
</div>
<p>This is useful for conditional extraction, as we’ll see below.</p>
<p>An aside: some or all elements of an array can be set equal to one number using slice notation.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="n">zeros</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>4-element Vector{Float64}:
 0.0
 0.0
 0.0
 0.0
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="n">a</span><span class="p">[</span><span class="mi">2</span><span class="o">:</span><span class="k">end</span><span class="p">]</span> <span class="o">.=</span> <span class="mi">42</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>3-element view(::Vector{Float64}, 2:4) with eltype Float64:
 42.0
 42.0
 42.0
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="n">a</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>4-element Vector{Float64}:
  0.0
 42.0
 42.0
 42.0
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="views-and-slices">
<h3><span class="section-number">4.2.4. </span>Views and Slices<a class="headerlink" href="#views-and-slices" title="Permalink to this headline">¶</a></h3>
<p>Using the <code class="docutils literal notranslate"><span class="pre">:</span></code> notation provides a slice of an array, copying the sub-array to a new array with a similar type.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span> <span class="mi">2</span><span class="p">;</span> <span class="mi">3</span> <span class="mi">4</span><span class="p">]</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">a</span><span class="p">[</span><span class="o">:</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>
<span class="nd">@show</span> <span class="n">b</span>
<span class="n">a</span><span class="p">[</span><span class="o">:</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span> <span class="c"># modify a</span>
<span class="nd">@show</span> <span class="n">a</span>
<span class="nd">@show</span> <span class="n">b</span><span class="p">;</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>b = [2, 4]
a = 
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[1 4; 3 5]
b = [2, 4]
</pre></div>
</div>
</div>
</div>
<p>A <strong>view</strong> on the other hand does not copy the value</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span> <span class="mi">2</span><span class="p">;</span> <span class="mi">3</span> <span class="mi">4</span><span class="p">]</span>
<span class="nd">@views</span> <span class="n">b</span> <span class="o">=</span> <span class="n">a</span><span class="p">[</span><span class="o">:</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>
<span class="nd">@show</span> <span class="n">b</span>
<span class="n">a</span><span class="p">[</span><span class="o">:</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>
<span class="nd">@show</span> <span class="n">a</span>
<span class="nd">@show</span> <span class="n">b</span><span class="p">;</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>b = [2, 4]
a = [1 4; 3 5]
b = [4, 5]
</pre></div>
</div>
</div>
</div>
<p>Note that the only difference is the <code class="docutils literal notranslate"><span class="pre">&#64;views</span></code> macro, which will replace any slices with views in the expression.</p>
<p>An alternative is to call the <code class="docutils literal notranslate"><span class="pre">view</span></code> function directly – though it is generally discouraged since it is a step away from the math.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="nd">@views</span> <span class="n">b</span> <span class="o">=</span> <span class="n">a</span><span class="p">[</span><span class="o">:</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>
<span class="n">view</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="o">:</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="o">==</span> <span class="n">b</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>true
</pre></div>
</div>
</div>
</div>
<p>As with most programming in Julia, it is best to avoid prematurely assuming that <code class="docutils literal notranslate"><span class="pre">&#64;views</span></code> will have a significant impact on performance, and stress code clarity above all else.</p>
<p>Another important lesson about <code class="docutils literal notranslate"><span class="pre">&#64;views</span></code> is that they <strong>are not</strong> normal, dense arrays.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span> <span class="mi">2</span><span class="p">;</span> <span class="mi">3</span> <span class="mi">4</span><span class="p">]</span>
<span class="n">b_slice</span> <span class="o">=</span> <span class="n">a</span><span class="p">[</span><span class="o">:</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>
<span class="nd">@show</span> <span class="n">typeof</span><span class="p">(</span><span class="n">b_slice</span><span class="p">)</span>
<span class="nd">@show</span> <span class="n">typeof</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="nd">@views</span> <span class="n">b</span> <span class="o">=</span> <span class="n">a</span><span class="p">[</span><span class="o">:</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>
<span class="nd">@show</span> <span class="n">typeof</span><span class="p">(</span><span class="n">b</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>typeof(b_slice) = Vector{Int64}
typeof(a) = Matrix{Int64}
typeof(b) = SubArray{Int64, 1, Matrix{Int64}, Tuple{Base.Slice{Base.OneTo{Int64}}, Int64}, true}
</pre></div>
</div>
</div>
</div>
<p>The type of <code class="docutils literal notranslate"><span class="pre">b</span></code> is a good example of how types are not as they may seem.</p>
<p>Similarly</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span> <span class="mi">2</span><span class="p">;</span> <span class="mi">3</span> <span class="mi">4</span><span class="p">]</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">a</span><span class="o">&#39;</span>   <span class="c"># transpose</span>
<span class="n">typeof</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Adjoint{Int64, Matrix{Int64}}
</pre></div>
</div>
</div>
</div>
<p>To copy into a dense array</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span> <span class="mi">2</span><span class="p">;</span> <span class="mi">3</span> <span class="mi">4</span><span class="p">]</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">a</span><span class="o">&#39;</span> <span class="c"># transpose</span>
<span class="n">c</span> <span class="o">=</span> <span class="kt">Matrix</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>  <span class="c"># convert to matrix</span>
<span class="n">d</span> <span class="o">=</span> <span class="n">collect</span><span class="p">(</span><span class="n">b</span><span class="p">)</span> <span class="c"># also `collect` works on any iterable</span>
<span class="n">c</span> <span class="o">==</span> <span class="n">d</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>true
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="special-matrices">
<h3><span class="section-number">4.2.5. </span>Special Matrices<a class="headerlink" href="#special-matrices" title="Permalink to this headline">¶</a></h3>
<p>As we saw with <code class="docutils literal notranslate"><span class="pre">transpose</span></code>, sometimes types that look like matrices are not stored as a dense array.</p>
<p>As an example, consider creating a diagonal matrix</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="n">d</span> <span class="o">=</span> <span class="p">[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">]</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">Diagonal</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2×2 Diagonal{Float64, Vector{Float64}}:
 1.0   ⋅ 
  ⋅   2.0
</pre></div>
</div>
</div>
</div>
<p>As you can see, the type is <code class="docutils literal notranslate"><span class="pre">2×2</span> <span class="pre">Diagonal{Float64,Array{Float64,1}}</span></code>, which is not a 2-dimensional array.</p>
<p>The reasons for this are both efficiency in storage, as well as efficiency in arithmetic and matrix operations.</p>
<p>In every important sense, matrix types such as <code class="docutils literal notranslate"><span class="pre">Diagonal</span></code> are just as much a “matrix” as the dense matrices we have using (see the <a class="reference internal" href="introduction_to_types.html"><span class="doc">introduction to types lecture</span></a> for more)</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="nd">@show</span> <span class="mi">2</span><span class="n">a</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">rand</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
<span class="nd">@show</span> <span class="n">b</span> <span class="o">*</span> <span class="n">a</span><span class="p">;</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2a = [2.0 0.0; 0.0 4.0]
b * a = 
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[0.3167194439128125 1.5616602439410956; 0.5092588645612988 1.119135571155252]
</pre></div>
</div>
</div>
</div>
<p>Another example is in the construction of an identity matrix, where a naive implementation is</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="n">b</span> <span class="o">=</span> <span class="p">[</span><span class="mf">1.0</span> <span class="mf">2.0</span><span class="p">;</span> <span class="mf">3.0</span> <span class="mf">4.0</span><span class="p">]</span>
<span class="n">b</span> <span class="o">-</span> <span class="n">Diagonal</span><span class="p">([</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">])</span>  <span class="c"># poor style, inefficient code</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2×2 Matrix{Float64}:
 0.0  2.0
 3.0  3.0
</pre></div>
</div>
</div>
</div>
<p>Whereas you should instead use</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="n">b</span> <span class="o">=</span> <span class="p">[</span><span class="mf">1.0</span> <span class="mf">2.0</span><span class="p">;</span> <span class="mf">3.0</span> <span class="mf">4.0</span><span class="p">]</span>
<span class="n">b</span> <span class="o">-</span> <span class="n">I</span>  <span class="c"># good style, and note the lack of dimensions of I</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2×2 Matrix{Float64}:
 0.0  2.0
 3.0  3.0
</pre></div>
</div>
</div>
</div>
<p>While the implementation of <code class="docutils literal notranslate"><span class="pre">I</span></code> is a little abstract to go into at this point, a hint is:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="n">typeof</span><span class="p">(</span><span class="n">I</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>UniformScaling{Bool}
</pre></div>
</div>
</div>
</div>
<p>This is a <code class="docutils literal notranslate"><span class="pre">UniformScaling</span></code> type rather than an identity matrix, making it much more powerful and general.</p>
</div>
<div class="section" id="assignment-and-passing-arrays">
<h3><span class="section-number">4.2.6. </span>Assignment and Passing Arrays<a class="headerlink" href="#assignment-and-passing-arrays" title="Permalink to this headline">¶</a></h3>
<p>As discussed above, in Julia, the left hand side of an assignment is a “binding” or a label to a value.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span><span class="p">]</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">x</span>  <span class="c"># name `y` binds to whatever value `x` bound to</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>1×3 Matrix{Int64}:
 1  2  3
</pre></div>
</div>
</div>
</div>
<p>The consequence of this, is that you can re-bind that name.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span><span class="p">]</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">x</span>        <span class="c"># name `y` binds to whatever `x` bound to</span>
<span class="n">z</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span><span class="p">]</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">z</span>        <span class="c"># only changes name binding, not value!</span>
<span class="nd">@show</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(x, y, z) = ([1 2 3], [2 3 4], [2 3 4])
</pre></div>
</div>
</div>
</div>
<p>What this means is that if <code class="docutils literal notranslate"><span class="pre">a</span></code> is an array and we set <code class="docutils literal notranslate"><span class="pre">b</span> <span class="pre">=</span> <span class="pre">a</span></code> then <code class="docutils literal notranslate"><span class="pre">a</span></code> and <code class="docutils literal notranslate"><span class="pre">b</span></code> point to exactly the same data.</p>
<p>In the above, suppose you had meant to change the value of <code class="docutils literal notranslate"><span class="pre">x</span></code> to the values of <code class="docutils literal notranslate"><span class="pre">y</span></code>, you need to assign the values rather than the name.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span><span class="p">]</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">x</span>       <span class="c"># name `y` binds to whatever `x` bound to</span>
<span class="n">z</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span><span class="p">]</span>
<span class="n">y</span> <span class="o">.=</span> <span class="n">z</span>      <span class="c"># now dispatches the assignment of each element</span>
<span class="nd">@show</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(x, y, z) = ([2 3 4], [2 3 4], [2 3 4])
</pre></div>
</div>
</div>
</div>
<p>Alternatively, you could have used <code class="docutils literal notranslate"><span class="pre">y[:]</span> <span class="pre">=</span> <span class="pre">z</span></code>.</p>
<p>This applies to in-place functions as well.</p>
<p>First, define a simple function for a linear map</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="k">function</span> <span class="n">f</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
    <span class="k">return</span> <span class="p">[</span><span class="mi">1</span> <span class="mi">2</span><span class="p">;</span> <span class="mi">3</span> <span class="mi">4</span><span class="p">]</span> <span class="o">*</span> <span class="n">x</span>  <span class="c"># matrix * column vector</span>
<span class="k">end</span>

<span class="n">val</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>
<span class="n">f</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2-element Vector{Int64}:
  5
 11
</pre></div>
</div>
</div>
</div>
<p>In general, these “out-of-place” functions are preferred to “in-place” functions, which modify the arguments.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="k">function</span> <span class="n">f</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
    <span class="k">return</span> <span class="p">[</span><span class="mi">1</span> <span class="mi">2</span><span class="p">;</span> <span class="mi">3</span> <span class="mi">4</span><span class="p">]</span> <span class="o">*</span> <span class="n">x</span> <span class="c"># matrix * column vector</span>
<span class="k">end</span>

<span class="n">val</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">similar</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>

<span class="k">function</span> <span class="n">f!</span><span class="p">(</span><span class="n">out</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span>
    <span class="n">out</span> <span class="o">.=</span> <span class="p">[</span><span class="mi">1</span> <span class="mi">2</span><span class="p">;</span> <span class="mi">3</span> <span class="mi">4</span><span class="p">]</span> <span class="o">*</span> <span class="n">x</span>
<span class="k">end</span>

<span class="n">f!</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">val</span><span class="p">)</span>
<span class="n">y</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2-element Vector{Int64}:
  5
 11
</pre></div>
</div>
</div>
</div>
<p>This demonstrates a key convention in Julia: functions which modify any of the arguments have the name ending with <code class="docutils literal notranslate"><span class="pre">!</span></code> (e.g. <code class="docutils literal notranslate"><span class="pre">push!</span></code>).</p>
<p>We can also see a common mistake, where instead of modifying the arguments, the name binding is swapped</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="k">function</span> <span class="n">f</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
    <span class="k">return</span> <span class="p">[</span><span class="mi">1</span> <span class="mi">2</span><span class="p">;</span> <span class="mi">3</span> <span class="mi">4</span><span class="p">]</span> <span class="o">*</span> <span class="n">x</span>  <span class="c"># matrix * column vector</span>
<span class="k">end</span>

<span class="n">val</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">similar</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>

<span class="k">function</span> <span class="n">f!</span><span class="p">(</span><span class="n">out</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span>
    <span class="n">out</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span> <span class="mi">2</span><span class="p">;</span> <span class="mi">3</span> <span class="mi">4</span><span class="p">]</span> <span class="o">*</span> <span class="n">x</span>   <span class="c"># MISTAKE! Should be .= or [:]</span>
<span class="k">end</span>
<span class="n">f!</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">val</span><span class="p">)</span>
<span class="n">y</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2-element Vector{Int64}:
 0
 1
</pre></div>
</div>
</div>
</div>
<p>The frequency of making this mistake is one of the reasons to avoid in-place functions, unless proven to be necessary by benchmarking.</p>
</div>
<div class="section" id="in-place-and-immutable-types">
<h3><span class="section-number">4.2.7. </span>In-place and Immutable Types<a class="headerlink" href="#in-place-and-immutable-types" title="Permalink to this headline">¶</a></h3>
<p>Note that scalars are always immutable, such that</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="n">y</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span> <span class="mi">2</span><span class="p">]</span>
<span class="n">y</span> <span class="o">.-=</span> <span class="mi">2</span>    <span class="c"># y .= y .- 2, no problem</span>

<span class="n">x</span> <span class="o">=</span> <span class="mi">5</span>
<span class="c"># x .-= 2  # Fails!</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">x</span> <span class="o">-</span> <span class="mi">2</span>  <span class="c"># subtle difference - creates a new value and rebinds the variable</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>3
</pre></div>
</div>
</div>
</div>
<p>In particular, there is no way to pass any immutable into a function and have it modified</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">=</span> <span class="mi">2</span>

<span class="k">function</span> <span class="n">f</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
    <span class="n">x</span> <span class="o">=</span> <span class="mi">3</span>     <span class="c"># MISTAKE! does not modify x, creates a new value!</span>
<span class="k">end</span>

<span class="n">f</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>          <span class="c"># cannot modify immutables in place</span>
<span class="nd">@show</span> <span class="n">x</span><span class="p">;</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>x = 2
</pre></div>
</div>
</div>
</div>
<p>This is also true for other immutable types such as tuples, as well as some vector types</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="k">using</span> <span class="n">StaticArrays</span>
<span class="n">xdynamic</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>
<span class="n">xstatic</span> <span class="o">=</span> <span class="nd">@SVector</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>  <span class="c"># turns it into a highly optimized static vector</span>

<span class="n">f</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">=</span> <span class="mi">2</span><span class="n">x</span>
<span class="nd">@show</span> <span class="n">f</span><span class="p">(</span><span class="n">xdynamic</span><span class="p">)</span>
<span class="nd">@show</span> <span class="n">f</span><span class="p">(</span><span class="n">xstatic</span><span class="p">)</span>

<span class="c"># inplace version</span>
<span class="k">function</span> <span class="n">g</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
    <span class="n">x</span> <span class="o">.=</span> <span class="mi">2</span><span class="n">x</span>
    <span class="k">return</span> <span class="s">&quot;Success!&quot;</span>
<span class="k">end</span>
<span class="nd">@show</span> <span class="n">xdynamic</span>
<span class="nd">@show</span> <span class="n">g</span><span class="p">(</span><span class="n">xdynamic</span><span class="p">)</span>
<span class="nd">@show</span> <span class="n">xdynamic</span><span class="p">;</span>

<span class="c"># g(xstatic) # fails, static vectors are immutable</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>f(xdynamic) = [2, 4]
f(xstatic) = 
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[2, 4]
xdynamic = [1, 2]
g(xdynamic) = &quot;Success!&quot;
xdynamic = [2, 4]
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="section" id="operations-on-arrays">
<h2><a class="toc-backref" href="#id7"><span class="section-number">4.3. </span>Operations on Arrays</a><a class="headerlink" href="#operations-on-arrays" title="Permalink to this headline">¶</a></h2>
<div class="section" id="array-methods">
<h3><span class="section-number">4.3.1. </span>Array Methods<a class="headerlink" href="#array-methods" title="Permalink to this headline">¶</a></h3>
<p>Julia provides standard functions for acting on arrays, some of which we’ve
already seen</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>

<span class="nd">@show</span> <span class="n">length</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="nd">@show</span> <span class="n">sum</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="nd">@show</span> <span class="n">mean</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="nd">@show</span> <span class="n">std</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>      <span class="c"># standard deviation</span>
<span class="nd">@show</span> <span class="n">var</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>      <span class="c"># variance</span>
<span class="nd">@show</span> <span class="n">maximum</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="nd">@show</span> <span class="n">minimum</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="nd">@show</span> <span class="n">extrema</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>  <span class="c"># (mimimum(a), maximum(a))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>length(a) = 3
sum(a) = 0
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>mean(a) = 0.0
std(a) = 1.0
var(a) = 1.0
maximum(a) = 
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>1
minimum(a) = -1
extrema(a) = 
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(-1, 1)
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(-1, 1)
</pre></div>
</div>
</div>
</div>
<p>To sort an array</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="n">b</span> <span class="o">=</span> <span class="n">sort</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">rev</span> <span class="o">=</span> <span class="nb">true</span><span class="p">)</span>  <span class="c"># returns new array, original not modified</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>3-element Vector{Int64}:
  1
  0
 -1
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="n">b</span> <span class="o">=</span> <span class="n">sort!</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">rev</span> <span class="o">=</span> <span class="nb">true</span><span class="p">)</span>  <span class="c"># returns *modified original* array</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>3-element Vector{Int64}:
  1
  0
 -1
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="n">b</span> <span class="o">==</span> <span class="n">a</span>  <span class="c"># tests if have the same values</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>true
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="n">b</span> <span class="o">===</span> <span class="n">a</span>  <span class="c"># tests if arrays are identical (i.e share same memory)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>true
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="matrix-algebra">
<h3><span class="section-number">4.3.2. </span>Matrix Algebra<a class="headerlink" href="#matrix-algebra" title="Permalink to this headline">¶</a></h3>
<p>For two dimensional arrays, <code class="docutils literal notranslate"><span class="pre">*</span></code> means matrix multiplication</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="n">ones</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>1×2 Matrix{Float64}:
 1.0  1.0
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="n">b</span> <span class="o">=</span> <span class="n">ones</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2×2 Matrix{Float64}:
 1.0  1.0
 1.0  1.0
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">*</span> <span class="n">b</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>1×2 Matrix{Float64}:
 2.0  2.0
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="n">b</span> <span class="o">*</span> <span class="n">a</span><span class="o">&#39;</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2×1 Matrix{Float64}:
 2.0
 2.0
</pre></div>
</div>
</div>
</div>
<p>To solve the linear system <span class="math notranslate nohighlight">\(A X = B\)</span> for <span class="math notranslate nohighlight">\(X\)</span> use <code class="docutils literal notranslate"><span class="pre">A</span> <span class="pre">\</span> <span class="pre">B</span></code></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="n">A</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span> <span class="mi">2</span><span class="p">;</span> <span class="mi">2</span> <span class="mi">3</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2×2 Matrix{Int64}:
 1  2
 2  3
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="n">B</span> <span class="o">=</span> <span class="n">ones</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2×2 Matrix{Float64}:
 1.0  1.0
 1.0  1.0
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="n">A</span> <span class="o">\</span> <span class="n">B</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2×2 Matrix{Float64}:
 -1.0  -1.0
  1.0   1.0
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="n">inv</span><span class="p">(</span><span class="n">A</span><span class="p">)</span> <span class="o">*</span> <span class="n">B</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2×2 Matrix{Float64}:
 -1.0  -1.0
  1.0   1.0
</pre></div>
</div>
</div>
</div>
<p>Although the last two operations give the same result, the first one is numerically more stable and should be preferred in most cases.</p>
<p>Multiplying two <strong>one</strong> dimensional vectors gives an error – which is reasonable since the meaning is ambiguous.</p>
<p>More precisely, the error is that there isn’t an implementation of <code class="docutils literal notranslate"><span class="pre">*</span></code> for two one dimensional vectors.</p>
<p>The output explains this, and lists some other methods of <code class="docutils literal notranslate"><span class="pre">*</span></code> which Julia thinks are close to what we want.</p>
<div class="cell tag_raises-exception docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="n">ones</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="n">ones</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>  <span class="c"># does not conform, expect error</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="ne">MethodError</span>: no method matching *(::Vector{Float64}, ::Vector{Float64})
<span class="n">Closest</span> <span class="n">candidates</span> <span class="n">are</span><span class="p">:</span>
  <span class="o">*</span><span class="p">(::</span><span class="n">Any</span><span class="p">,</span> <span class="p">::</span><span class="n">Any</span><span class="p">,</span> <span class="p">::</span><span class="n">Any</span><span class="p">,</span> <span class="p">::</span><span class="n">Any</span><span class="o">...</span><span class="p">)</span> <span class="n">at</span> <span class="n">operators</span><span class="o">.</span><span class="n">jl</span><span class="p">:</span><span class="mi">560</span>
  <span class="o">*</span><span class="p">(::</span><span class="n">StridedMatrix</span><span class="p">{</span><span class="n">T</span><span class="p">},</span> <span class="p">::</span><span class="n">StridedVector</span><span class="p">{</span><span class="n">S</span><span class="p">})</span> <span class="n">where</span> <span class="p">{</span><span class="n">T</span><span class="o">&lt;</span><span class="p">:</span><span class="n">Union</span><span class="p">{</span><span class="n">Float32</span><span class="p">,</span> <span class="n">Float64</span><span class="p">,</span> <span class="n">ComplexF32</span><span class="p">,</span> <span class="n">ComplexF64</span><span class="p">},</span> <span class="n">S</span><span class="o">&lt;</span><span class="p">:</span><span class="n">Real</span><span class="p">}</span> <span class="n">at</span> <span class="o">/</span><span class="n">buildworker</span><span class="o">/</span><span class="n">worker</span><span class="o">/</span><span class="n">package_linux64</span><span class="o">/</span><span class="n">build</span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">share</span><span class="o">/</span><span class="n">julia</span><span class="o">/</span><span class="n">stdlib</span><span class="o">/</span><span class="n">v1</span><span class="mf">.6</span><span class="o">/</span><span class="n">LinearAlgebra</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">matmul</span><span class="o">.</span><span class="n">jl</span><span class="p">:</span><span class="mi">44</span>
  <span class="o">*</span><span class="p">(::</span><span class="n">StridedVecOrMat</span><span class="p">{</span><span class="n">T</span><span class="p">}</span> <span class="n">where</span> <span class="n">T</span><span class="p">,</span> <span class="p">::</span><span class="n">Adjoint</span><span class="p">{</span><span class="n">var</span><span class="s2">&quot;#s832&quot;</span><span class="p">,</span> <span class="n">var</span><span class="s2">&quot;#s831&quot;</span><span class="p">}</span> <span class="n">where</span> <span class="p">{</span><span class="n">var</span><span class="s2">&quot;#s832&quot;</span><span class="p">,</span> <span class="n">var</span><span class="s2">&quot;#s831&quot;</span><span class="o">&lt;</span><span class="p">:</span><span class="n">LinearAlgebra</span><span class="o">.</span><span class="n">LQPackedQ</span><span class="p">})</span> <span class="n">at</span> <span class="o">/</span><span class="n">buildworker</span><span class="o">/</span><span class="n">worker</span><span class="o">/</span><span class="n">package_linux64</span><span class="o">/</span><span class="n">build</span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">share</span><span class="o">/</span><span class="n">julia</span><span class="o">/</span><span class="n">stdlib</span><span class="o">/</span><span class="n">v1</span><span class="mf">.6</span><span class="o">/</span><span class="n">LinearAlgebra</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">lq</span><span class="o">.</span><span class="n">jl</span><span class="p">:</span><span class="mi">254</span>
  <span class="o">...</span>

<span class="ne">Stacktrace</span>:
 <span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="n">top</span><span class="o">-</span><span class="n">level</span> <span class="n">scope</span>
   <span class="o">@</span> <span class="n">In</span><span class="p">[</span><span class="mi">73</span><span class="p">]:</span><span class="mi">1</span>
 <span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="nb">eval</span>
   <span class="o">@</span> <span class="o">./</span><span class="n">boot</span><span class="o">.</span><span class="n">jl</span><span class="p">:</span><span class="mi">360</span> <span class="p">[</span><span class="n">inlined</span><span class="p">]</span>
 <span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="n">include_string</span><span class="p">(</span><span class="n">mapexpr</span><span class="p">::</span><span class="n">typeof</span><span class="p">(</span><span class="n">REPL</span><span class="o">.</span><span class="n">softscope</span><span class="p">),</span> <span class="n">mod</span><span class="p">::</span><span class="n">Module</span><span class="p">,</span> <span class="n">code</span><span class="p">::</span><span class="n">String</span><span class="p">,</span> <span class="n">filename</span><span class="p">::</span><span class="n">String</span><span class="p">)</span>
   <span class="o">@</span> <span class="n">Base</span> <span class="o">./</span><span class="n">loading</span><span class="o">.</span><span class="n">jl</span><span class="p">:</span><span class="mi">1094</span>
</pre></div>
</div>
</div>
</div>
<p>Instead, you could take the transpose to form a row vector</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="n">ones</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="o">&#39;</span> <span class="o">*</span> <span class="n">ones</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2.0
</pre></div>
</div>
</div>
</div>
<p>Alternatively, for inner product in this setting use <code class="docutils literal notranslate"><span class="pre">dot()</span></code> or the unicode <code class="docutils literal notranslate"><span class="pre">\cdot&lt;TAB&gt;</span></code></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="nd">@show</span> <span class="n">dot</span><span class="p">(</span><span class="n">ones</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span> <span class="n">ones</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span>
<span class="nd">@show</span> <span class="n">ones</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="o">⋅</span> <span class="n">ones</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>dot(ones(2), ones(2)) = 2.0
ones(2) ⋅ ones(2) = 2.0
</pre></div>
</div>
</div>
</div>
<p>Matrix multiplication using one dimensional vectors similarly follows from treating them as
column vectors.  Post-multiplication requires a transpose</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="n">b</span> <span class="o">=</span> <span class="n">ones</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">b</span> <span class="o">*</span> <span class="n">ones</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2-element Vector{Float64}:
 2.0
 2.0
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="n">ones</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="o">&#39;</span> <span class="o">*</span> <span class="n">b</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>1×2 adjoint(::Vector{Float64}) with eltype Float64:
 2.0  2.0
</pre></div>
</div>
</div>
</div>
<p>Note that the type of the returned value in this case is not <code class="docutils literal notranslate"><span class="pre">Array{Float64,1}</span></code> but rather
<code class="docutils literal notranslate"><span class="pre">Adjoint{Float64,Array{Float64,1}}</span></code>.</p>
<p>This is since the left multiplication by a row vector should also be a row-vector.  It also hints
that the types in Julia more complicated than first appears in the surface notation, as we will explore
further in the <a class="reference internal" href="introduction_to_types.html"><span class="doc">introduction to types lecture</span></a>.</p>
</div>
<div class="section" id="elementwise-operations">
<h3><span class="section-number">4.3.3. </span>Elementwise Operations<a class="headerlink" href="#elementwise-operations" title="Permalink to this headline">¶</a></h3>
<div class="section" id="algebraic-operations">
<h4><span class="section-number">4.3.3.1. </span>Algebraic Operations<a class="headerlink" href="#algebraic-operations" title="Permalink to this headline">¶</a></h4>
<p>Suppose that we wish to multiply every element of matrix <code class="docutils literal notranslate"><span class="pre">A</span></code> with the corresponding element of matrix <code class="docutils literal notranslate"><span class="pre">B</span></code>.</p>
<p>In that case we need to replace <code class="docutils literal notranslate"><span class="pre">*</span></code> (matrix multiplication) with <code class="docutils literal notranslate"><span class="pre">.*</span></code> (elementwise multiplication).</p>
<p>For example, compare</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="n">ones</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="n">ones</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>   <span class="c"># matrix multiplication</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2×2 Matrix{Float64}:
 2.0  2.0
 2.0  2.0
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="n">ones</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="o">.*</span> <span class="n">ones</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>   <span class="c"># element by element multiplication</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2×2 Matrix{Float64}:
 1.0  1.0
 1.0  1.0
</pre></div>
</div>
</div>
</div>
<p>This is a general principle: <code class="docutils literal notranslate"><span class="pre">.x</span></code> means apply operator <code class="docutils literal notranslate"><span class="pre">x</span></code> elementwise</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="n">A</span> <span class="o">=</span> <span class="o">-</span><span class="n">ones</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2×2 Matrix{Float64}:
 -1.0  -1.0
 -1.0  -1.0
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="n">A</span><span class="o">.^</span><span class="mi">2</span>  <span class="c"># square every element</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2×2 Matrix{Float64}:
 1.0  1.0
 1.0  1.0
</pre></div>
</div>
</div>
</div>
<p>However in practice some operations are mathematically valid without broadcasting, and hence the <code class="docutils literal notranslate"><span class="pre">.</span></code> can be omitted.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="n">ones</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="n">ones</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>  <span class="c"># same as ones(2, 2) .+ ones(2, 2)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2×2 Matrix{Float64}:
 2.0  2.0
 2.0  2.0
</pre></div>
</div>
</div>
</div>
<p>Scalar multiplication is similar</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="n">A</span> <span class="o">=</span> <span class="n">ones</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2×2 Matrix{Float64}:
 1.0  1.0
 1.0  1.0
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="o">*</span> <span class="n">A</span>  <span class="c"># same as 2 .* A</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2×2 Matrix{Float64}:
 2.0  2.0
 2.0  2.0
</pre></div>
</div>
</div>
</div>
<p>In fact you can omit the <code class="docutils literal notranslate"><span class="pre">*</span></code> altogether and just write <code class="docutils literal notranslate"><span class="pre">2A</span></code>.</p>
<p>Unlike MATLAB and other languages, scalar addition requires the <code class="docutils literal notranslate"><span class="pre">.+</span></code> in order to correctly broadcast</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>
<span class="n">x</span> <span class="o">.+</span> <span class="mi">1</span>     <span class="c"># not x + 1</span>
<span class="n">x</span> <span class="o">.-</span> <span class="mi">1</span>     <span class="c"># not x - 1</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2-element Vector{Int64}:
 0
 1
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="elementwise-comparisons">
<h4><span class="section-number">4.3.3.2. </span>Elementwise Comparisons<a class="headerlink" href="#elementwise-comparisons" title="Permalink to this headline">¶</a></h4>
<p>Elementwise comparisons also use the <code class="docutils literal notranslate"><span class="pre">.x</span></code> style notation</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">30</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>3-element Vector{Int64}:
 10
 20
 30
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="n">b</span> <span class="o">=</span> <span class="p">[</span><span class="o">-</span><span class="mi">100</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>3-element Vector{Int64}:
 -100
    0
  100
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="n">b</span> <span class="o">.&gt;</span> <span class="n">a</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>3-element BitVector:
 0
 0
 1
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">.==</span> <span class="n">b</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>3-element BitVector:
 0
 0
 0
</pre></div>
</div>
</div>
</div>
<p>We can also do comparisons against scalars with parallel syntax</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="n">b</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>3-element Vector{Int64}:
 -100
    0
  100
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="n">b</span> <span class="o">.&gt;</span> <span class="mi">1</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>3-element BitVector:
 0
 0
 1
</pre></div>
</div>
</div>
</div>
<p>This is particularly useful for <em>conditional extraction</em> – extracting the elements of an array that satisfy a condition</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="n">randn</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>4-element Vector{Float64}:
  0.3430571584547128
 -0.4884335276416762
 -1.0178581988736801
  1.861757268055233
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">.&lt;</span> <span class="mi">0</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>4-element BitVector:
 0
 1
 1
 0
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="n">a</span><span class="p">[</span><span class="n">a</span> <span class="o">.&lt;</span> <span class="mi">0</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2-element Vector{Float64}:
 -0.4884335276416762
 -1.0178581988736801
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="changing-dimensions">
<h4><span class="section-number">4.3.3.3. </span>Changing Dimensions<a class="headerlink" href="#changing-dimensions" title="Permalink to this headline">¶</a></h4>
<p>The primary function for changing the dimensions of an array is <code class="docutils literal notranslate"><span class="pre">reshape()</span></code></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">40</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>4-element Vector{Int64}:
 10
 20
 30
 40
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="n">b</span> <span class="o">=</span> <span class="n">reshape</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2×2 Matrix{Int64}:
 10  30
 20  40
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="n">b</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2×2 Matrix{Int64}:
 10  30
 20  40
</pre></div>
</div>
</div>
</div>
<p>Notice that this function returns a view on the existing array.</p>
<p>This means that changing the data in the new array will modify the data in the
old one.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="n">b</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">100</span>  <span class="c"># continuing the previous example</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>100
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="n">b</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2×2 Matrix{Int64}:
 100  30
  20  40
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="n">a</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>4-element Vector{Int64}:
 100
  20
  30
  40
</pre></div>
</div>
</div>
</div>
<p>To collapse an array along one dimension you can use <code class="docutils literal notranslate"><span class="pre">dropdims()</span></code></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span><span class="p">]</span>  <span class="c"># two dimensional</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>1×4 Matrix{Int64}:
 1  2  3  4
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="n">dropdims</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">dims</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>4-element Vector{Int64}:
 1
 2
 3
 4
</pre></div>
</div>
</div>
</div>
<p>The return value is an array with the specified dimension “flattened”.</p>
</div>
</div>
<div class="section" id="broadcasting-functions">
<h3><span class="section-number">4.3.4. </span>Broadcasting Functions<a class="headerlink" href="#broadcasting-functions" title="Permalink to this headline">¶</a></h3>
<p>Julia provides standard mathematical functions such as <code class="docutils literal notranslate"><span class="pre">log</span></code>, <code class="docutils literal notranslate"><span class="pre">exp</span></code>, <code class="docutils literal notranslate"><span class="pre">sin</span></code>, etc.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="n">log</span><span class="p">(</span><span class="mf">1.0</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0.0
</pre></div>
</div>
</div>
</div>
<p>By default, these functions act <em>elementwise</em> on arrays</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="n">log</span><span class="o">.</span><span class="p">(</span><span class="mi">1</span><span class="o">:</span><span class="mi">4</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>4-element Vector{Float64}:
 0.0
 0.6931471805599453
 1.0986122886681098
 1.3862943611198906
</pre></div>
</div>
</div>
</div>
<p>Note that we can get the same result as with a comprehension or more explicit loop</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="p">[</span> <span class="n">log</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="k">in</span> <span class="mi">1</span><span class="o">:</span><span class="mi">4</span> <span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>4-element Vector{Float64}:
 0.0
 0.6931471805599453
 1.0986122886681098
 1.3862943611198906
</pre></div>
</div>
</div>
</div>
<p>Nonetheless the syntax is convenient.</p>
</div>
<div class="section" id="linear-algebra">
<h3><span class="section-number">4.3.5. </span>Linear Algebra<a class="headerlink" href="#linear-algebra" title="Permalink to this headline">¶</a></h3>
<p>(<a class="reference external" href="https://docs.julialang.org/en/v1/stdlib/LinearAlgebra/">See linear algebra documentation</a>)</p>
<p>Julia provides some a great deal of additional functionality related to linear operations</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="n">A</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span> <span class="mi">2</span><span class="p">;</span> <span class="mi">3</span> <span class="mi">4</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2×2 Matrix{Int64}:
 1  2
 3  4
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="n">det</span><span class="p">(</span><span class="n">A</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>-2.0
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="n">tr</span><span class="p">(</span><span class="n">A</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>5
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="n">eigvals</span><span class="p">(</span><span class="n">A</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2-element Vector{Float64}:
 -0.3722813232690143
  5.372281323269014
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="n">rank</span><span class="p">(</span><span class="n">A</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="section" id="ranges">
<h2><a class="toc-backref" href="#id8"><span class="section-number">4.4. </span>Ranges</a><a class="headerlink" href="#ranges" title="Permalink to this headline">¶</a></h2>
<p>As with many other types, a <code class="docutils literal notranslate"><span class="pre">Range</span></code> can act as a vector.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="mi">10</span><span class="o">:</span><span class="mi">12</span>        <span class="c"># a range, equivalent to 10:1:12</span>
<span class="nd">@show</span> <span class="kt">Vector</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>  <span class="c"># can convert, but shouldn&#39;t</span>

<span class="n">b</span> <span class="o">=</span> <span class="n">Diagonal</span><span class="p">([</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">])</span>
<span class="n">b</span> <span class="o">*</span> <span class="n">a</span> <span class="o">.-</span> <span class="p">[</span><span class="mf">1.0</span><span class="p">;</span> <span class="mf">2.0</span><span class="p">;</span> <span class="mf">3.0</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Vector(a) = [10, 11, 12]
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>3-element Vector{Float64}:
  9.0
 20.0
 33.0
</pre></div>
</div>
</div>
</div>
<p>Ranges can also be created with floating point numbers using the same notation.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="mf">0.0</span><span class="o">:</span><span class="mf">0.1</span><span class="o">:</span><span class="mf">1.0</span>  <span class="c"># 0.0, 0.1, 0.2, ... 1.0</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0.0:0.1:1.0
</pre></div>
</div>
</div>
</div>
<p>But care should be taken if the terminal node is not a multiple of the set sizes.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="n">maxval</span> <span class="o">=</span> <span class="mf">1.0</span>
<span class="n">minval</span> <span class="o">=</span> <span class="mf">0.0</span>
<span class="n">stepsize</span> <span class="o">=</span> <span class="mf">0.15</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">minval</span><span class="o">:</span><span class="n">stepsize</span><span class="ss">:maxval</span> <span class="c"># 0.0, 0.15, 0.3, ...</span>
<span class="n">maximum</span><span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="o">==</span> <span class="n">maxval</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>false
</pre></div>
</div>
</div>
</div>
<p>To evenly space points where the maximum value is important, i.e., <code class="docutils literal notranslate"><span class="pre">linspace</span></code> in other languages</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="n">maxval</span> <span class="o">=</span> <span class="mf">1.0</span>
<span class="n">minval</span> <span class="o">=</span> <span class="mf">0.0</span>
<span class="n">numpoints</span> <span class="o">=</span> <span class="mi">10</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">range</span><span class="p">(</span><span class="n">minval</span><span class="p">,</span> <span class="n">maxval</span><span class="p">,</span> <span class="n">length</span><span class="o">=</span><span class="n">numpoints</span><span class="p">)</span>
<span class="c"># or range(minval, stop=maxval, length=numpoints)</span>

<span class="n">maximum</span><span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="o">==</span> <span class="n">maxval</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>true
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="tuples-and-named-tuples">
<h2><a class="toc-backref" href="#id9"><span class="section-number">4.5. </span>Tuples and Named Tuples</a><a class="headerlink" href="#tuples-and-named-tuples" title="Permalink to this headline">¶</a></h2>
<p>(<a class="reference external" href="https://docs.julialang.org/en/v1/manual/functions/#Tuples-1">See tuples</a> and <a class="reference external" href="https://docs.julialang.org/en/v1/manual/functions/#Named-Tuples-1">named tuples documentation</a>)</p>
<p>We were introduced to tuples earlier, which provide high-performance immutable sets of distinct types.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="n">t</span> <span class="o">=</span> <span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="s">&quot;test&quot;</span><span class="p">)</span>
<span class="n">t</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>            <span class="c"># access by index</span>
<span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="n">t</span>        <span class="c"># unpack</span>
<span class="c"># t[1] = 3.0    # would fail as tuples are immutable</span>
<span class="n">println</span><span class="p">(</span><span class="s">&quot;a = </span><span class="si">$a</span><span class="s"> and b = </span><span class="si">$b</span><span class="s">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>a = 1.0 and b = test
</pre></div>
</div>
</div>
</div>
<p>As well as <strong>named tuples</strong>, which extend tuples with names for each argument.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="n">t</span> <span class="o">=</span> <span class="p">(</span><span class="n">val1</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">,</span> <span class="n">val2</span> <span class="o">=</span> <span class="s">&quot;test&quot;</span><span class="p">)</span>
<span class="n">t</span><span class="o">.</span><span class="n">val1</span>      <span class="c"># access by index</span>
<span class="c"># a, b = t  # bad style, better to unpack by name with @unpack</span>
<span class="n">println</span><span class="p">(</span><span class="s">&quot;val1 = </span><span class="si">$</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">val1</span><span class="p">)</span><span class="s"> and val1 = </span><span class="si">$</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">val1</span><span class="p">)</span><span class="s">&quot;</span><span class="p">)</span> <span class="c"># access by name</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>val1 = 1.0 and val1 = 1.0
</pre></div>
</div>
</div>
</div>
<p>While immutable, it is possible to manipulate tuples and generate new ones</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="n">t2</span> <span class="o">=</span> <span class="p">(</span><span class="n">val3</span> <span class="o">=</span> <span class="mi">4</span><span class="p">,</span> <span class="n">val4</span> <span class="o">=</span> <span class="s">&quot;test!!&quot;</span><span class="p">)</span>
<span class="n">t3</span> <span class="o">=</span> <span class="n">merge</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">t2</span><span class="p">)</span>  <span class="c"># new tuple</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(val1 = 1.0, val2 = &quot;test&quot;, val3 = 4, val4 = &quot;test!!&quot;)
</pre></div>
</div>
</div>
</div>
<p>Named tuples are a convenient and high-performance way to manage and unpack sets of parameters</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="k">function</span> <span class="n">f</span><span class="p">(</span><span class="n">parameters</span><span class="p">)</span>
    <span class="n">α</span><span class="p">,</span> <span class="n">β</span> <span class="o">=</span> <span class="n">parameters</span><span class="o">.</span><span class="n">α</span><span class="p">,</span> <span class="n">parameters</span><span class="o">.</span><span class="n">β</span>  <span class="c"># poor style, error prone if adding parameters</span>
    <span class="k">return</span> <span class="n">α</span> <span class="o">+</span> <span class="n">β</span>
<span class="k">end</span>

<span class="n">parameters</span> <span class="o">=</span> <span class="p">(</span><span class="n">α</span> <span class="o">=</span> <span class="mf">0.1</span><span class="p">,</span> <span class="n">β</span> <span class="o">=</span> <span class="mf">0.2</span><span class="p">)</span>
<span class="n">f</span><span class="p">(</span><span class="n">parameters</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0.30000000000000004
</pre></div>
</div>
</div>
</div>
<p>This functionality is aided by the <code class="docutils literal notranslate"><span class="pre">Parameters.jl</span></code> package and the <code class="docutils literal notranslate"><span class="pre">&#64;unpack</span></code> macro</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="k">using</span> <span class="n">Parameters</span>

<span class="k">function</span> <span class="n">f</span><span class="p">(</span><span class="n">parameters</span><span class="p">)</span>
    <span class="nd">@unpack</span> <span class="n">α</span><span class="p">,</span> <span class="n">β</span> <span class="o">=</span> <span class="n">parameters</span>  <span class="c"># good style, less sensitive to errors</span>
    <span class="k">return</span> <span class="n">α</span> <span class="o">+</span> <span class="n">β</span>
<span class="k">end</span>

<span class="n">parameters</span> <span class="o">=</span> <span class="p">(</span><span class="n">α</span> <span class="o">=</span> <span class="mf">0.1</span><span class="p">,</span> <span class="n">β</span> <span class="o">=</span> <span class="mf">0.2</span><span class="p">)</span>
<span class="n">f</span><span class="p">(</span><span class="n">parameters</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0.30000000000000004
</pre></div>
</div>
</div>
</div>
<p>In order to manage default values, use the <code class="docutils literal notranslate"><span class="pre">&#64;with_kw</span></code> macro</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="k">using</span> <span class="n">Parameters</span>
<span class="n">paramgen</span> <span class="o">=</span> <span class="nd">@with_kw</span> <span class="p">(</span><span class="n">α</span> <span class="o">=</span> <span class="mf">0.1</span><span class="p">,</span> <span class="n">β</span> <span class="o">=</span> <span class="mf">0.2</span><span class="p">)</span>  <span class="c"># create named tuples with defaults</span>

<span class="c"># creates named tuples, replacing defaults</span>
<span class="nd">@show</span> <span class="n">paramgen</span><span class="p">()</span>  <span class="c"># calling without arguments gives all defaults</span>
<span class="nd">@show</span> <span class="n">paramgen</span><span class="p">(</span><span class="n">α</span> <span class="o">=</span> <span class="mf">0.2</span><span class="p">)</span>
<span class="nd">@show</span> <span class="n">paramgen</span><span class="p">(</span><span class="n">α</span> <span class="o">=</span> <span class="mf">0.2</span><span class="p">,</span> <span class="n">β</span> <span class="o">=</span> <span class="mf">0.5</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>paramgen() = (α = 0.1, β = 0.2)
paramgen(α = 0.2) = (α = 0.2, β = 0.2)
paramgen(α = 0.2, β = 0.5) = (α = 0.2, β = 0.5)
</pre></div>
</div>
</div>
</div>
<p>An alternative approach, defining a new type using <code class="docutils literal notranslate"><span class="pre">struct</span></code> tends to be more prone to accidental misuse, and leads to a great deal of boilerplate code.</p>
<p>For that, and other reasons of generality, we will use named tuples for collections of parameters where possible.</p>
</div>
<div class="section" id="nothing-missing-and-unions">
<h2><a class="toc-backref" href="#id10"><span class="section-number">4.6. </span>Nothing, Missing, and Unions</a><a class="headerlink" href="#nothing-missing-and-unions" title="Permalink to this headline">¶</a></h2>
<p>Sometimes a variable, return type from a function, or value in an array needs to represent the absence of a value rather than a particular value.</p>
<p>There are two distinct use cases for this</p>
<ol class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">nothing</span></code> (“software engineers null”): used where no value makes sense in a particular context due to a failure in the code, a function parameter not passed in, etc.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">missing</span></code> (“data scientists null”): used when a value would make conceptual sense, but it isn’t available.</p></li>
</ol>
<div class="section" id="nothing-and-basic-error-handling">
<span id="error-handling"></span><h3><span class="section-number">4.6.1. </span>Nothing and Basic Error Handling<a class="headerlink" href="#nothing-and-basic-error-handling" title="Permalink to this headline">¶</a></h3>
<p>The value <code class="docutils literal notranslate"><span class="pre">nothing</span></code> is a single value of type <code class="docutils literal notranslate"><span class="pre">Nothing</span></code></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="n">typeof</span><span class="p">(</span><span class="nb">nothing</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Nothing
</pre></div>
</div>
</div>
</div>
<p>An example of a reasonable use of <code class="docutils literal notranslate"><span class="pre">nothing</span></code> is if you need to have a variable defined in an outer scope, which may or may not be set in an inner one</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="k">function</span> <span class="n">f</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
    <span class="n">x</span> <span class="o">=</span> <span class="nb">nothing</span>
    <span class="k">if</span> <span class="n">y</span> <span class="o">&gt;</span> <span class="mf">0.0</span>
        <span class="c"># calculations to set `x`</span>
        <span class="n">x</span> <span class="o">=</span> <span class="n">y</span>
    <span class="k">end</span>

    <span class="c"># later, can check `x`</span>
    <span class="k">if</span> <span class="n">isnothing</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
        <span class="n">println</span><span class="p">(</span><span class="s">&quot;x was not set&quot;</span><span class="p">)</span>
    <span class="k">else</span>
        <span class="n">println</span><span class="p">(</span><span class="s">&quot;x = </span><span class="si">$x</span><span class="s">&quot;</span><span class="p">)</span>
    <span class="k">end</span>
    <span class="n">x</span>
<span class="k">end</span>

<span class="nd">@show</span> <span class="n">f</span><span class="p">(</span><span class="mf">1.0</span><span class="p">)</span>
<span class="nd">@show</span> <span class="n">f</span><span class="p">(</span><span class="o">-</span><span class="mf">1.0</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>x = 1.0
f(1.0) = 1.0
x was not set
f(-1.0) = nothing
</pre></div>
</div>
</div>
</div>
<p>While in general you want to keep a variable name bound to a single type in Julia, this is a notable exception.</p>
<p>Similarly, if needed, you can return a <code class="docutils literal notranslate"><span class="pre">nothing</span></code> from a function to indicate that it did not calculate as expected.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="k">function</span> <span class="n">f</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="mf">0.0</span>
        <span class="k">return</span> <span class="n">sqrt</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
    <span class="k">else</span>
        <span class="k">return</span> <span class="nb">nothing</span>
    <span class="k">end</span>
<span class="k">end</span>
<span class="n">x1</span> <span class="o">=</span> <span class="mf">1.0</span>
<span class="n">x2</span> <span class="o">=</span> <span class="o">-</span><span class="mf">1.0</span>
<span class="n">y1</span> <span class="o">=</span> <span class="n">f</span><span class="p">(</span><span class="n">x1</span><span class="p">)</span>
<span class="n">y2</span> <span class="o">=</span> <span class="n">f</span><span class="p">(</span><span class="n">x2</span><span class="p">)</span>

<span class="c"># check results with isnothing</span>
<span class="k">if</span> <span class="n">isnothing</span><span class="p">(</span><span class="n">y1</span><span class="p">)</span>
    <span class="n">println</span><span class="p">(</span><span class="s">&quot;f(</span><span class="si">$x2</span><span class="s">) successful&quot;</span><span class="p">)</span>
<span class="k">else</span>
    <span class="n">println</span><span class="p">(</span><span class="s">&quot;f(</span><span class="si">$x2</span><span class="s">) failed&quot;</span><span class="p">);</span>
<span class="k">end</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>f(-1.0) failed
</pre></div>
</div>
</div>
</div>
<p>As an aside, an equivalent way to write the above function is to use the
<a class="reference external" href="https://docs.julialang.org/en/v1/manual/control-flow/index.html#man-conditional-evaluation-1">ternary operator</a>,
which gives a compact if/then/else structure</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="k">function</span> <span class="n">f</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
    <span class="n">x</span> <span class="o">&gt;</span> <span class="mf">0.0</span> <span class="o">?</span> <span class="n">sqrt</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">:</span> <span class="nb">nothing</span>  <span class="c"># the &quot;a ? b : c&quot; pattern is the ternary</span>
<span class="k">end</span>

<span class="n">f</span><span class="p">(</span><span class="mf">1.0</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>1.0
</pre></div>
</div>
</div>
</div>
<p>We will sometimes use this form when it makes the code more clear (and it will occasionally make the code higher performance).</p>
<p>Regardless of how <code class="docutils literal notranslate"><span class="pre">f(x)</span></code> is written,  the return type is an example of a union, where the result could be one of an explicit set of types.</p>
<p>In this particular case, the compiler would deduce that the type would be a <code class="docutils literal notranslate"><span class="pre">Union{Nothing,Float64}</span></code> – that is, it returns either a floating point or a <code class="docutils literal notranslate"><span class="pre">nothing</span></code>.</p>
<p>You will see this type directly if you use an array containing both types</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mf">1.0</span><span class="p">,</span> <span class="nb">nothing</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2-element Vector{Union{Nothing, Float64}}:
 1.0
  nothing
</pre></div>
</div>
</div>
</div>
<p>When considering error handling, whether you want a function to return <code class="docutils literal notranslate"><span class="pre">nothing</span></code> or simply fail depends on whether the code calling <code class="docutils literal notranslate"><span class="pre">f(x)</span></code> is carefully checking the results.</p>
<p>For example, if you were calling on an array of parameters where a priori you were not sure which ones will succeed, then</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.1</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">2.0</span><span class="p">]</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>

<span class="c"># presumably check `y`</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>4-element Vector{Union{Nothing, Float64}}:
 0.31622776601683794
  nothing
 1.4142135623730951
  nothing
</pre></div>
</div>
</div>
</div>
<p>On the other hand, if the parameter passed is invalid and you would prefer not to handle a graceful failure, then using an assertion is more appropriate.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="k">function</span> <span class="n">f</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
    <span class="nd">@assert</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="mf">0.0</span>
    <span class="n">sqrt</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="k">end</span>

<span class="n">f</span><span class="p">(</span><span class="mf">1.0</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>1.0
</pre></div>
</div>
</div>
</div>
<p>Finally, <code class="docutils literal notranslate"><span class="pre">nothing</span></code> is a good way to indicate an optional parameter in a function</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="k">function</span> <span class="n">f</span><span class="p">(</span><span class="n">x</span><span class="p">;</span> <span class="n">z</span> <span class="o">=</span> <span class="nb">nothing</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">isnothing</span><span class="p">(</span><span class="n">z</span><span class="p">)</span>
        <span class="n">println</span><span class="p">(</span><span class="s">&quot;No z given with </span><span class="si">$x</span><span class="s">&quot;</span><span class="p">)</span>
    <span class="k">else</span>
        <span class="n">println</span><span class="p">(</span><span class="s">&quot;z = </span><span class="si">$z</span><span class="s"> given with </span><span class="si">$x</span><span class="s">&quot;</span><span class="p">)</span>
    <span class="k">end</span>
<span class="k">end</span>

<span class="n">f</span><span class="p">(</span><span class="mf">1.0</span><span class="p">)</span>
<span class="n">f</span><span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="mf">3.0</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>No z given with 1.0
z = 3.0 given with 1.0
</pre></div>
</div>
</div>
</div>
<p>An alternative to <code class="docutils literal notranslate"><span class="pre">nothing</span></code>, which can be useful and sometimes higher performance,
is to use <code class="docutils literal notranslate"><span class="pre">NaN</span></code> to signal that a value is invalid returning from a function.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="k">function</span> <span class="n">f</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="mf">0.0</span>
        <span class="k">return</span> <span class="n">x</span>
    <span class="k">else</span>
        <span class="k">return</span> <span class="nb">NaN</span>
    <span class="k">end</span>
<span class="k">end</span>

<span class="n">f</span><span class="p">(</span><span class="mf">0.1</span><span class="p">)</span>
<span class="n">f</span><span class="p">(</span><span class="o">-</span><span class="mf">1.0</span><span class="p">)</span>

<span class="nd">@show</span> <span class="n">typeof</span><span class="p">(</span><span class="n">f</span><span class="p">(</span><span class="o">-</span><span class="mf">1.0</span><span class="p">))</span>
<span class="nd">@show</span> <span class="n">f</span><span class="p">(</span><span class="o">-</span><span class="mf">1.0</span><span class="p">)</span> <span class="o">==</span> <span class="nb">NaN</span>  <span class="c"># note, this fails!</span>
<span class="nd">@show</span> <span class="n">isnan</span><span class="p">(</span><span class="n">f</span><span class="p">(</span><span class="o">-</span><span class="mf">1.0</span><span class="p">))</span>  <span class="c"># check with this</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>typeof(f(-1.0)) = Float64
f(-1.0) == NaN = 
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>false
isnan(f(-1.0)) = true
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>true
</pre></div>
</div>
</div>
</div>
<p>Note that in this case, the return type is <code class="docutils literal notranslate"><span class="pre">Float64</span></code> regardless of the input for <code class="docutils literal notranslate"><span class="pre">Float64</span></code> input.</p>
<p>Keep in mind, though, that this only works if the return type of a function is <code class="docutils literal notranslate"><span class="pre">Float64</span></code>.</p>
</div>
<div class="section" id="exceptions">
<h3><span class="section-number">4.6.2. </span>Exceptions<a class="headerlink" href="#exceptions" title="Permalink to this headline">¶</a></h3>
<p>(See <a class="reference external" href="https://docs.julialang.org/en/v1/manual/control-flow/index.html#Exception-Handling-1">exceptions documentation</a>)</p>
<p>While returning a <code class="docutils literal notranslate"><span class="pre">nothing</span></code> can be a good way to deal with functions which may or may not return values, a more robust error handling method is to use exceptions.</p>
<p>Unless you are writing a package, you will rarely want to define and throw your own exceptions, but will need to deal with them from other libraries.</p>
<p>The key distinction for when to use an exceptions vs. return a <code class="docutils literal notranslate"><span class="pre">nothing</span></code> is whether an error is unexpected rather than a normal path of execution.</p>
<p>An example of an exception is a <code class="docutils literal notranslate"><span class="pre">DomainError</span></code>, which signifies that a value passed to a function is invalid.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="c"># throws exception, turned off to prevent breaking notebook</span>
<span class="c"># sqrt(-1.0)</span>

<span class="c"># to see the error</span>
<span class="k">try</span> <span class="n">sqrt</span><span class="p">(</span><span class="o">-</span><span class="mf">1.0</span><span class="p">);</span> <span class="k">catch</span> <span class="n">err</span><span class="p">;</span> <span class="n">err</span> <span class="k">end</span>  <span class="c"># catches the exception and prints it</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>DomainError(-1.0, &quot;sqrt will only return a complex result if called with a complex argument. Try sqrt(Complex(x)).&quot;)
</pre></div>
</div>
</div>
</div>
<p>Another example you will see is when the compiler cannot convert between types.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="c"># throws exception, turned off to prevent breaking notebook</span>
<span class="c"># convert(Int64, 3.12)</span>

<span class="c"># to see the error</span>
<span class="k">try</span> <span class="n">convert</span><span class="p">(</span><span class="kt">Int64</span><span class="p">,</span> <span class="mf">3.12</span><span class="p">);</span> <span class="k">catch</span> <span class="n">err</span><span class="p">;</span> <span class="n">err</span> <span class="k">end</span>  <span class="c"># catches the exception and prints it.</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>InexactError(:Int64, Int64, 3.12)
</pre></div>
</div>
</div>
</div>
<p>If these exceptions are generated from unexpected cases in your code, it may be appropriate simply let them occur and ensure you can read the error.</p>
<p>Occasionally you will want to catch these errors and try to recover, as we did above in the <code class="docutils literal notranslate"><span class="pre">try</span></code> block.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="k">function</span> <span class="n">f</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
    <span class="k">try</span>
        <span class="n">sqrt</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
    <span class="k">catch</span> <span class="n">err</span>                <span class="c"># enters if exception thrown</span>
        <span class="n">sqrt</span><span class="p">(</span><span class="n">complex</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>  <span class="c"># convert to complex number</span>
    <span class="k">end</span>
<span class="k">end</span>

<span class="n">f</span><span class="p">(</span><span class="mf">0.0</span><span class="p">)</span>
<span class="n">f</span><span class="p">(</span><span class="o">-</span><span class="mf">1.0</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0.0 + 1.0im
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="missing">
<span id="id2"></span><h3><span class="section-number">4.6.3. </span>Missing<a class="headerlink" href="#missing" title="Permalink to this headline">¶</a></h3>
<p>(see <a class="reference external" href="https://docs.julialang.org/en/v1/manual/missing/">“missing” documentation</a>)</p>
<p>The value <code class="docutils literal notranslate"><span class="pre">missing</span></code> of type <code class="docutils literal notranslate"><span class="pre">Missing</span></code> is used to represent missing value in a statistical sense.</p>
<p>For example, if you loaded data from a panel, and gaps existed</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mf">3.0</span><span class="p">,</span> <span class="nb">missing</span><span class="p">,</span> <span class="mf">5.0</span><span class="p">,</span> <span class="nb">missing</span><span class="p">,</span> <span class="nb">missing</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>5-element Vector{Union{Missing, Float64}}:
 3.0
  missing
 5.0
  missing
  missing
</pre></div>
</div>
</div>
</div>
<p>A key feature of <code class="docutils literal notranslate"><span class="pre">missing</span></code> is that it propagates through other function calls - unlike <code class="docutils literal notranslate"><span class="pre">nothing</span></code></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="n">f</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">=</span> <span class="n">x</span><span class="o">^</span><span class="mi">2</span>

<span class="nd">@show</span> <span class="nb">missing</span> <span class="o">+</span> <span class="mf">1.0</span>
<span class="nd">@show</span> <span class="nb">missing</span> <span class="o">*</span> <span class="mi">2</span>
<span class="nd">@show</span> <span class="nb">missing</span> <span class="o">*</span> <span class="s">&quot;test&quot;</span>
<span class="nd">@show</span> <span class="n">f</span><span class="p">(</span><span class="nb">missing</span><span class="p">);</span>      <span class="c"># even user-defined functions</span>
<span class="nd">@show</span> <span class="n">mean</span><span class="p">(</span><span class="n">x</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>missing + 1.0 = missing
missing * 2 = missing
missing * &quot;test&quot; = missing
f(missing) = missing
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>mean(x) = missing
</pre></div>
</div>
</div>
</div>
<p>The purpose of this is to ensure that failures do not silently fail and provide meaningless numerical results.</p>
<p>This even applies for the comparison of values, which</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">=</span> <span class="nb">missing</span>

<span class="nd">@show</span> <span class="n">x</span> <span class="o">==</span> <span class="nb">missing</span>
<span class="nd">@show</span> <span class="n">x</span> <span class="o">===</span> <span class="nb">missing</span>  <span class="c"># an exception</span>
<span class="nd">@show</span> <span class="n">ismissing</span><span class="p">(</span><span class="n">x</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>x == missing = missing
x === missing = true
ismissing(x) = true
</pre></div>
</div>
</div>
</div>
<p>Where <code class="docutils literal notranslate"><span class="pre">ismissing</span></code> is the canonical way to test the value.</p>
<p>In the case where you would like to calculate a value without the missing values, you can use <code class="docutils literal notranslate"><span class="pre">skipmissing</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mf">1.0</span><span class="p">,</span> <span class="nb">missing</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">,</span> <span class="nb">missing</span><span class="p">,</span> <span class="nb">missing</span><span class="p">,</span> <span class="mf">5.0</span><span class="p">]</span>

<span class="nd">@show</span> <span class="n">mean</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="nd">@show</span> <span class="n">mean</span><span class="p">(</span><span class="n">skipmissing</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
<span class="nd">@show</span> <span class="n">coalesce</span><span class="o">.</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">);</span>  <span class="c"># replace missing with 0.0;</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>mean(x) = missing
mean(skipmissing(x)) = 2.6666666666666665
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>coalesce.(x, 0.0) = [1.0, 0.0, 2.0, 0.0, 0.0, 5.0]
</pre></div>
</div>
</div>
</div>
<p>As <code class="docutils literal notranslate"><span class="pre">missing</span></code> is similar to R’s <code class="docutils literal notranslate"><span class="pre">NA</span></code> type, we will see more of <code class="docutils literal notranslate"><span class="pre">missing</span></code> when we cover <code class="docutils literal notranslate"><span class="pre">DataFrames</span></code>.</p>
</div>
</div>
<div class="section" id="exercises">
<h2><a class="toc-backref" href="#id11"><span class="section-number">4.7. </span>Exercises</a><a class="headerlink" href="#exercises" title="Permalink to this headline">¶</a></h2>
<div class="section" id="exercise-1">
<span id="np-ex1"></span><h3><span class="section-number">4.7.1. </span>Exercise 1<a class="headerlink" href="#exercise-1" title="Permalink to this headline">¶</a></h3>
<p>This exercise uses matrix operations that arise in certain problems,
including when dealing with linear stochastic difference equations.</p>
<p>If you aren’t familiar with all the terminology don’t be concerned – you can
skim read the background discussion and focus purely on the matrix exercise.</p>
<p>With that said, consider the stochastic difference equation</p>
<div class="math notranslate nohighlight" id="equation-ja-sde">
<span class="eqno">(4.1)<a class="headerlink" href="#equation-ja-sde" title="Permalink to this equation">¶</a></span>\[X_{t+1} = A X_t + b + \Sigma W_{t+1}\]</div>
<p>Here</p>
<ul class="simple">
<li><p><span class="math notranslate nohighlight">\(X_t, b\)</span> and <span class="math notranslate nohighlight">\(X_{t+1}\)</span> are <span class="math notranslate nohighlight">\(n \times 1\)</span></p></li>
<li><p><span class="math notranslate nohighlight">\(A\)</span> is <span class="math notranslate nohighlight">\(n \times n\)</span></p></li>
<li><p><span class="math notranslate nohighlight">\(\Sigma\)</span> is <span class="math notranslate nohighlight">\(n \times k\)</span></p></li>
<li><p><span class="math notranslate nohighlight">\(W_t\)</span> is <span class="math notranslate nohighlight">\(k \times 1\)</span> and <span class="math notranslate nohighlight">\(\{W_t\}\)</span> is iid with zero mean and variance-covariance matrix equal to the identity matrix</p></li>
</ul>
<p>Let <span class="math notranslate nohighlight">\(S_t\)</span> denote the <span class="math notranslate nohighlight">\(n \times n\)</span> variance-covariance matrix of <span class="math notranslate nohighlight">\(X_t\)</span>.</p>
<p>Using the rules for computing variances in matrix expressions, it can be shown from <a class="reference internal" href="#equation-ja-sde">(4.1)</a> that <span class="math notranslate nohighlight">\(\{S_t\}\)</span> obeys</p>
<div class="math notranslate nohighlight" id="equation-ja-sde-v">
<span class="eqno">(4.2)<a class="headerlink" href="#equation-ja-sde-v" title="Permalink to this equation">¶</a></span>\[S_{t+1} = A S_t A' + \Sigma \Sigma'\]</div>
<p>It can be shown that, provided all eigenvalues of <span class="math notranslate nohighlight">\(A\)</span> lie within the unit circle, the sequence <span class="math notranslate nohighlight">\(\{S_t\}\)</span> converges to a unique limit <span class="math notranslate nohighlight">\(S\)</span>.</p>
<p>This is the <strong>unconditional variance</strong> or <strong>asymptotic variance</strong> of the stochastic difference equation.</p>
<p>As an exercise, try writing a simple function that solves for the limit <span class="math notranslate nohighlight">\(S\)</span> by iterating on <a class="reference internal" href="#equation-ja-sde-v">(4.2)</a> given <span class="math notranslate nohighlight">\(A\)</span> and <span class="math notranslate nohighlight">\(\Sigma\)</span>.</p>
<p>To test your solution, observe that the limit <span class="math notranslate nohighlight">\(S\)</span> is a solution to the matrix equation</p>
<div class="math notranslate nohighlight" id="equation-ja-dle">
<span class="eqno">(4.3)<a class="headerlink" href="#equation-ja-dle" title="Permalink to this equation">¶</a></span>\[S = A S A' + Q
\quad \text{where} \quad Q := \Sigma \Sigma'\]</div>
<p>This kind of equation is known as a <strong>discrete time Lyapunov equation</strong>.</p>
<p>The <a class="reference external" href="http://quantecon.org/quantecon-jl">QuantEcon package</a>
provides a function called <code class="docutils literal notranslate"><span class="pre">solve_discrete_lyapunov</span></code> that implements a fast
“doubling” algorithm to solve this equation.</p>
<p>Test your iterative method against <code class="docutils literal notranslate"><span class="pre">solve_discrete_lyapunov</span></code> using matrices</p>
<div class="math notranslate nohighlight">
\[\begin{split}
A =
\begin{bmatrix}
    0.8 &amp; -0.2  \\
    -0.1 &amp; 0.7
\end{bmatrix}
\qquad
\Sigma =
\begin{bmatrix}
    0.5 &amp; 0.4 \\
    0.4 &amp; 0.6
\end{bmatrix}
\end{split}\]</div>
</div>
<div class="section" id="exercise-2">
<h3><span class="section-number">4.7.2. </span>Exercise 2<a class="headerlink" href="#exercise-2" title="Permalink to this headline">¶</a></h3>
<p>Take a stochastic process for <span class="math notranslate nohighlight">\(\{y_t\}_{t=0}^T\)</span></p>
<div class="math notranslate nohighlight">
\[
y_{t+1} = \gamma + \theta y_t + \sigma w_{t+1}
\]</div>
<p>where</p>
<ul class="simple">
<li><p><span class="math notranslate nohighlight">\(w_{t+1}\)</span> is distributed <code class="docutils literal notranslate"><span class="pre">Normal(0,1)</span></code></p></li>
<li><p><span class="math notranslate nohighlight">\(\gamma=1, \sigma=1, y_0 = 0\)</span></p></li>
<li><p><span class="math notranslate nohighlight">\(\theta \in \Theta \equiv \{0.8, 0.9, 0.98\}\)</span></p></li>
</ul>
<p>Given these parameters</p>
<ul class="simple">
<li><p>Simulate a single <span class="math notranslate nohighlight">\(y_t\)</span> series for each <span class="math notranslate nohighlight">\(\theta \in \Theta\)</span>
for <span class="math notranslate nohighlight">\(T = 150\)</span>.  Feel free to experiment with different <span class="math notranslate nohighlight">\(T\)</span>.</p></li>
<li><p>Overlay plots of the rolling mean of the process for each <span class="math notranslate nohighlight">\(\theta \in \Theta\)</span>,
i.e. for each <span class="math notranslate nohighlight">\(1 \leq \tau \leq T\)</span> plot</p></li>
</ul>
<div class="math notranslate nohighlight">
\[
\frac{1}{\tau}\sum_{t=1}^{\tau}y_T
\]</div>
<ul class="simple">
<li><p>Simulate <span class="math notranslate nohighlight">\(N=200\)</span> paths of the stochastic process above to the <span class="math notranslate nohighlight">\(T\)</span>,
for each <span class="math notranslate nohighlight">\(\theta \in \Theta\)</span>, where we refer to an element of a particular
simulation as <span class="math notranslate nohighlight">\(y^n_t\)</span>.</p></li>
<li><p>Overlay plots a histogram of the stationary distribution of the final
<span class="math notranslate nohighlight">\(y^n_T\)</span> for each <span class="math notranslate nohighlight">\(\theta \in \Theta\)</span>.  Hint: pass <code class="docutils literal notranslate"><span class="pre">alpha</span></code>
to a plot to make it transparent (e.g. <code class="docutils literal notranslate"><span class="pre">histogram(vals,</span> <span class="pre">alpha</span> <span class="pre">=</span> <span class="pre">0.5)</span></code>) or
use <code class="docutils literal notranslate"><span class="pre">stephist(vals)</span></code> to show just the step function for the histogram.</p></li>
<li><p>Numerically find the mean and variance of this as an ensemble average, i.e.
<span class="math notranslate nohighlight">\(\sum_{n=1}^N\frac{y^n_T}{N}\)</span> and
<span class="math notranslate nohighlight">\(\sum_{n=1}^N\frac{(y_T^n)^2}{N} -\left(\sum_{n=1}^N\frac{y^n_T}{N}\right)^2\)</span>.</p></li>
</ul>
<p>Later, we will interpret some of these in <a class="reference internal" href="../tools_and_techniques/lln_clt.html"><span class="doc">this lecture</span></a>.</p>
</div>
<div class="section" id="exercise-3">
<h3><span class="section-number">4.7.3. </span>Exercise 3<a class="headerlink" href="#exercise-3" title="Permalink to this headline">¶</a></h3>
<p>Let the data generating process for a variable be</p>
<div class="math notranslate nohighlight">
\[
y = a x_1 + b x_1^2 + c x_2 + d + \sigma w
\]</div>
<p>where <span class="math notranslate nohighlight">\(y, x_1, x_2\)</span> are scalar observables, <span class="math notranslate nohighlight">\(a,b,c,d\)</span> are parameters to estimate, and <span class="math notranslate nohighlight">\(w\)</span> are iid normal with mean 0 and variance 1.</p>
<p>First, let’s simulate data we can use to estimate the parameters</p>
<ul class="simple">
<li><p>Draw <span class="math notranslate nohighlight">\(N=50\)</span> values for <span class="math notranslate nohighlight">\(x_1, x_2\)</span> from iid normal distributions.</p></li>
</ul>
<p>Then, simulate with different <span class="math notranslate nohighlight">\(w\)</span></p>
<ul class="simple">
<li><p>Draw a <span class="math notranslate nohighlight">\(w\)</span> vector for the <code class="docutils literal notranslate"><span class="pre">N</span></code> values and then <code class="docutils literal notranslate"><span class="pre">y</span></code> from this simulated data if the parameters were <span class="math notranslate nohighlight">\(a = 0.1, b = 0.2 c = 0.5, d = 1.0, \sigma = 0.1\)</span>.</p></li>
<li><p>Repeat that so you have <code class="docutils literal notranslate"><span class="pre">M</span> <span class="pre">=</span> <span class="pre">20</span></code> different simulations of the <code class="docutils literal notranslate"><span class="pre">y</span></code> for the <code class="docutils literal notranslate"><span class="pre">N</span></code> values.</p></li>
</ul>
<p>Finally, calculate order least squares manually (i.e., put the observables
into matrices and vectors, and directly use the equations for
<a class="reference external" href="https://en.wikipedia.org/wiki/Ordinary_least_squares">OLS</a> rather than a package).</p>
<ul class="simple">
<li><p>For each of the <code class="docutils literal notranslate"><span class="pre">M=20</span></code> simulations, calculate the OLS estimates for <span class="math notranslate nohighlight">\(a, b, c, d, \sigma\)</span>.</p></li>
<li><p>Plot a histogram of these estimates for each variable.</p></li>
</ul>
</div>
<div class="section" id="exercise-4">
<h3><span class="section-number">4.7.4. </span>Exercise 4<a class="headerlink" href="#exercise-4" title="Permalink to this headline">¶</a></h3>
<p>Redo Exercise 1 using the <code class="docutils literal notranslate"><span class="pre">fixedpoint</span></code> function from <code class="docutils literal notranslate"><span class="pre">NLsolve</span></code> <a class="reference internal" href="julia_by_example.html"><span class="doc">this lecture</span></a>.</p>
<p>Compare the number of iterations of the NLsolve’s Anderson Acceleration to the handcoded iteration used in Exercise 1.</p>
<p>Hint: Convert the matrix to a vector to use <code class="docutils literal notranslate"><span class="pre">fixedpoint</span></code>. e.g. <code class="docutils literal notranslate"><span class="pre">A</span> <span class="pre">=</span> <span class="pre">[1</span> <span class="pre">2;</span> <span class="pre">3</span> <span class="pre">4]</span></code> then <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">=</span> <span class="pre">reshape(A,</span> <span class="pre">4)</span></code> turns it into a vector.  To reverse, <code class="docutils literal notranslate"><span class="pre">reshape(x,</span> <span class="pre">2,</span> <span class="pre">2)</span></code>.</p>
</div>
</div>
<div class="section" id="solutions">
<h2><a class="toc-backref" href="#id12"><span class="section-number">4.8. </span>Solutions</a><a class="headerlink" href="#solutions" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id3">
<h3><span class="section-number">4.8.1. </span>Exercise 1<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h3>
<p>Here’s the iterative approach</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="k">function</span> <span class="n">compute_asymptotic_var</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">Σ</span><span class="p">;</span>
                                <span class="n">S0</span> <span class="o">=</span> <span class="n">Σ</span> <span class="o">*</span> <span class="n">Σ</span><span class="o">&#39;</span><span class="p">,</span>
                                <span class="n">tolerance</span> <span class="o">=</span> <span class="mf">1e-6</span><span class="p">,</span>
                                <span class="n">maxiter</span> <span class="o">=</span> <span class="mi">500</span><span class="p">)</span>
    <span class="n">V</span> <span class="o">=</span> <span class="n">Σ</span> <span class="o">*</span> <span class="n">Σ</span><span class="o">&#39;</span>
    <span class="n">S</span> <span class="o">=</span> <span class="n">S0</span>
    <span class="n">err</span> <span class="o">=</span> <span class="n">tolerance</span> <span class="o">+</span> <span class="mi">1</span>
    <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="k">while</span> <span class="n">err</span> <span class="o">&gt;</span> <span class="n">tolerance</span> <span class="o">&amp;&amp;</span> <span class="n">i</span> <span class="o">≤</span> <span class="n">maxiter</span>
        <span class="n">next_S</span> <span class="o">=</span> <span class="n">A</span> <span class="o">*</span> <span class="n">S</span> <span class="o">*</span> <span class="n">A</span><span class="o">&#39;</span> <span class="o">+</span> <span class="n">V</span>
        <span class="n">err</span> <span class="o">=</span> <span class="n">norm</span><span class="p">(</span><span class="n">S</span> <span class="o">-</span> <span class="n">next_S</span><span class="p">)</span>
        <span class="n">S</span> <span class="o">=</span> <span class="n">next_S</span>
        <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="k">end</span>
    <span class="k">return</span> <span class="n">S</span>
<span class="k">end</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>compute_asymptotic_var (generic function with 1 method)
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="n">A</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.8</span>  <span class="o">-</span><span class="mf">0.2</span><span class="p">;</span>
     <span class="o">-</span><span class="mf">0.1</span>  <span class="mf">0.7</span><span class="p">]</span>

<span class="n">Σ</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.5</span> <span class="mf">0.4</span><span class="p">;</span>
     <span class="mf">0.4</span> <span class="mf">0.6</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2×2 Matrix{Float64}:
 0.5  0.4
 0.4  0.6
</pre></div>
</div>
</div>
</div>
<p>Note that all eigenvalues of <span class="math notranslate nohighlight">\(A\)</span> lie inside the unit disc.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="n">maximum</span><span class="p">(</span><span class="n">abs</span><span class="p">,</span> <span class="n">eigvals</span><span class="p">(</span><span class="n">A</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0.9
</pre></div>
</div>
</div>
</div>
<p>Let’s compute the asymptotic variance</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="n">our_solution</span> <span class="o">=</span> <span class="n">compute_asymptotic_var</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">Σ</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2×2 Matrix{Float64}:
 0.671228  0.633476
 0.633476  0.858874
</pre></div>
</div>
</div>
</div>
<p>Now let’s do the same thing using QuantEcon’s <code class="docutils literal notranslate"><span class="pre">solve_discrete_lyapunov()</span></code> function and check we get the same result.</p>
<div class="cell tag_hide-output docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="k">using</span> <span class="n">QuantEcon</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>WARNING: using QuantEcon.LQ in module Main conflicts with an existing identifier.
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="n">norm</span><span class="p">(</span><span class="n">our_solution</span> <span class="o">-</span> <span class="n">solve_discrete_lyapunov</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">Σ</span> <span class="o">*</span> <span class="n">Σ</span><span class="o">&#39;</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>3.883245447999784e-6
</pre></div>
</div>
</div>
</div>
</div>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "julia-1.6"
        },
        kernelOptions: {
            kernelName: "julia-1.6",
            path: "./getting_started_julia"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'julia-1.6'</script>

                    </div>
                    
                </main> <!-- .page__content -->
                


                <footer class="page__footer">

                    <p><a href="https://creativecommons.org/licenses/by-sa/4.0/"><img src="https://licensebuttons.net/l/by-sa/4.0/80x15.png"></a></p>

                    <p>Creative Commons License &ndash; This work is licensed under a Creative Commons Attribution-ShareAlike 4.0 International.</p>

                </footer> <!-- .page__footer -->

            </div> <!-- .page -->

            

            
            <div class="sidebar bd-sidebar inactive" id="site-navigation">

                <div class="sidebar__header">


                    Contents

                </div>

                <nav class="sidebar__nav" id="sidebar-nav" aria-label="Main navigation">
                    <p class="caption">
 <span class="caption-text">
  Getting Started with Julia
 </span>
</p>
<ul class="current nav bd-sidenav nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="getting_started.html">
   1. Setting up Your Julia Environment
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="julia_by_example.html">
   2. Introductory Examples
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="julia_essentials.html">
   3. Julia Essentials
  </a>
 </li>
 <li class="toctree-l1 current active active">
  <a class="current reference internal" href="#">
   4. Arrays, Tuples, Ranges, and Other Fundamental Types
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="introduction_to_types.html">
   5. Introduction to Types and Generic Programming
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Package Ecosystem
 </span>
</p>
<ul class="nav bd-sidenav nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../more_julia/generic_programming.html">
   6. Generic Programming
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../more_julia/general_packages.html">
   7. General Purpose Packages
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../more_julia/data_statistical_packages.html">
   8. Data and Statistics Packages
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../more_julia/optimization_solver_packages.html">
   9. Solvers, Optimizers, and Automatic Differentiation
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Software Engineering
 </span>
</p>
<ul class="nav bd-sidenav nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../software_engineering/tools_editors.html">
   10. Visual Studio Code and Other Tools
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../software_engineering/version_control.html">
   11. GitHub, Version Control and Collaboration
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../software_engineering/testing.html">
   12. Packages, Testing, and Continuous Integration
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../software_engineering/need_for_speed.html">
   13. The Need for Speed
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Tools and Techniques
 </span>
</p>
<ul class="nav bd-sidenav nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../tools_and_techniques/linear_algebra.html">
   14. Linear Algebra
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../tools_and_techniques/orth_proj.html">
   15. Orthogonal Projections and Their Applications
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../tools_and_techniques/lln_clt.html">
   16. LLN and CLT
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../tools_and_techniques/linear_models.html">
   17. Linear State Space Models
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../tools_and_techniques/finite_markov.html">
   18. Finite Markov Chains
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../tools_and_techniques/stationary_densities.html">
   19. Continuous State Markov Chains
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../tools_and_techniques/kalman.html">
   20. A First Look at the Kalman Filter
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../tools_and_techniques/numerical_linear_algebra.html">
   21. Numerical Linear Algebra and Factorizations
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../tools_and_techniques/iterative_methods_sparsity.html">
   22. Krylov Methods and Matrix Conditioning
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Dynamic Programming
 </span>
</p>
<ul class="nav bd-sidenav nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../dynamic_programming/short_path.html">
   23. Shortest Paths
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../dynamic_programming/mccall_model.html">
   24. Job Search I: The McCall Search Model
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../dynamic_programming/mccall_model_with_separation.html">
   25. Job Search II: Search and Separation
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../dynamic_programming/wald_friedman.html">
   26. A Problem that Stumped Milton Friedman
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../dynamic_programming/odu.html">
   27. Job Search III: Search with Learning
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../dynamic_programming/career.html">
   28. Job Search IV: Modeling Career Choice
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../dynamic_programming/jv.html">
   29. Job Search V: On-the-Job Search
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../dynamic_programming/optgrowth.html">
   30. Optimal Growth I: The Stochastic Optimal Growth Model
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../dynamic_programming/coleman_policy_iter.html">
   31. Optimal Growth II: Time Iteration
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../dynamic_programming/egm_policy_iter.html">
   32. Optimal Growth III: The Endogenous Grid Method
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../dynamic_programming/lqcontrol.html">
   33. LQ Dynamic Programming Problems
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../dynamic_programming/perm_income.html">
   34. Optimal Savings I: The Permanent Income Model
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../dynamic_programming/perm_income_cons.html">
   35. Optimal Savings II: LQ Techniques
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../dynamic_programming/smoothing.html">
   36. Consumption and Tax Smoothing with Complete and Incomplete Markets
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../dynamic_programming/ifp.html">
   37. Optimal Savings III: Occasionally Binding Constraints
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../dynamic_programming/robustness.html">
   38. Robustness
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../dynamic_programming/discrete_dp.html">
   39. Discrete State Dynamic Programming
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Modeling in Continuous Time
 </span>
</p>
<ul class="nav bd-sidenav nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../continuous_time/seir_model.html">
   40. Modeling COVID 19 with Differential Equations
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../continuous_time/covid_sde.html">
   41. Modeling Shocks in COVID 19 with Stochastic Differential Equations
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Multiple Agent Models
 </span>
</p>
<ul class="nav bd-sidenav nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../multi_agent_models/schelling.html">
   42. Schelling’s Segregation Model
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../multi_agent_models/lake_model.html">
   43. A Lake Model of Employment and Unemployment
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../multi_agent_models/rational_expectations.html">
   44. Rational Expectations Equilibrium
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../multi_agent_models/markov_perf.html">
   45. Markov Perfect Equilibrium
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../multi_agent_models/markov_asset.html">
   46. Asset Pricing I: Finite State Models
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../multi_agent_models/lucas_model.html">
   47. Asset Pricing II: The Lucas Asset Pricing Model
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../multi_agent_models/harrison_kreps.html">
   48. Asset Pricing III:  Incomplete Markets
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../multi_agent_models/uncertainty_traps.html">
   49. Uncertainty Traps
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../multi_agent_models/aiyagari.html">
   50. The Aiyagari Model
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../multi_agent_models/arellano.html">
   51. Default Risk and Income Fluctuations
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../multi_agent_models/matsuyama.html">
   52. Globalization and Cycles
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Time Series Models
 </span>
</p>
<ul class="nav bd-sidenav nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../time_series_models/arma.html">
   53. Covariance Stationary Processes
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../time_series_models/estspec.html">
   54. Estimation of Spectra
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../time_series_models/additive_functionals.html">
   55. Additive Functionals
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../time_series_models/multiplicative_functionals.html">
   56. Multiplicative Functionals
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../time_series_models/lu_tricks.html">
   57. Classical Control with Linear Algebra
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../time_series_models/classical_filtering.html">
   58. Classical Filtering With Linear Algebra
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Dynamic Programming Squared
 </span>
</p>
<ul class="nav bd-sidenav nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../dynamic_programming_squared/dyn_stack.html">
   59. Dynamic Stackelberg Problems
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../dynamic_programming_squared/lqramsey.html">
   60. Optimal Taxation in an LQ Economy
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../dynamic_programming_squared/opt_tax_recur.html">
   61. Optimal Taxation with State-Contingent Debt
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../dynamic_programming_squared/amss.html">
   62. Optimal Taxation without State-Contingent Debt
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Other
 </span>
</p>
<ul class="nav bd-sidenav nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../about_lectures.html">
   63. About these Lectures
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../troubleshooting.html">
   64. Troubleshooting
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../zreferences.html">
   65. References
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../status.html">
   66. Execution Statistics
  </a>
 </li>
</ul>

                </nav>

                <div class="sidebar__footer">

                </div>

            </div> <!-- .sidebar -->
            
        </div> <!-- .main -->

        <div class="toolbar">

            <div class="toolbar__inner">

                <ul class="toolbar__main">
                    <li data-tippy-content="Table of Contents" class="btn__sidebar"><i data-feather="menu"></i></li>
                    <li data-tippy-content="Home"><a href="../intro.html"><i data-feather="home"></i></a></li>
                    <li class="btn__qelogo"><a href="https://quantecon.org" title=""><span class="show-for-sr">QuantEcon</span></a></li>
                    <!-- <li class="btn__search">
                        <form action="../search.html" method="get">
                            <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off">
                            <i data-feather="search"></i>
                        </form>
                    </li> -->
                </ul>

                <ul class="toolbar__links">
                    <li data-tippy-content="Fullscreen" class="btn__fullscreen"><i data-feather="maximize"></i></li>
                    <li data-tippy-content="Increase font size" class="btn__plus"><i data-feather="plus-circle"></i></li>
                    <li data-tippy-content="Decrease font size" class="btn__minus"><i data-feather="minus-circle"></i></li>
                    <li data-tippy-content="Change contrast" class="btn__contrast"><i data-feather="sunset"></i></li>
                    <li data-tippy-content="Download Notebook"><a href="_notebooks/getting_started_julia/fundamental_types.ipynb" download><i data-feather="download-cloud"></i></a></li>
                    <li class="settings-button" id="settingsButton"><div data-tippy-content="Launch Notebook"><i data-feather="play-circle"></i></div></li>
                        <li data-tippy-content="Download PDF" onClick="window.print()"><i data-feather="file"></i></li>
                    <li data-tippy-content="View Source"><a target="_blank" href="https://github.com/QuantEcon/lecture-julia.myst/tree/main/lectures/getting_started_julia/fundamental_types.md" download><i data-feather="github"></i></a></li>
                </ul>

            </div>

        </div> <!-- .toolbar -->
        <div id="downloadPDFModal" style="display: none;">
            <ul class="pdf-options" style="display: block;">
                <li class="download-pdf-book" onClick="window.print()">
                    <p>Lecture (PDF)</p>
                </li>
                <li class="download-pdf-file">
                    <a href="" download><p>Book (PDF)</p></a>
                </li>
            </ul>
        </div>
        <div id="settingsModal" style="display: none;">
            <p class="modal-title"> Notebook Launcher </p>
            <div class="modal-desc">
            <p>
                Choose public or private cloud service for "Launch" button.
            </p>
            </div>
            <p class="modal-subtitle">Select a server</p>
            <ul class="modal-servers">
            <li class="active launcher-public">
                <span class="label">Public</span>
                <select id="launcher-public-input">
                
                    <option value="https://mybinder.org/v2/gh/QuantEcon/lecture-julia.notebooks/main?urlpath=tree/getting_started_julia/fundamental_types.ipynb">BinderHub</option>
                
                </select>
                <i class="fas fa-check-circle"></i>
            </li>
            <li class="launcher-private">
                <span class="label">Private</span>
                <input type="text" id="launcher-private-input" data-repourl="https://github.com/QuantEcon/lecture-julia.notebooks" data-urlpath="tree/lecture-julia.notebooks/getting_started_julia/fundamental_types.ipynb" data-branch=main>
                <i class="fas fa-check-circle"></i>
            </li>
            </ul>
            <p class="launch"><a href="https://mybinder.org/v2/gh/QuantEcon/lecture-julia.notebooks/main?urlpath=tree/getting_started_julia/fundamental_types.ipynb" id="advancedLaunchButton" target="_blank">Launch Notebook</a></p>
            <script>
                // QuantEcon Notebook Launcher
                const launcherTypeElements = document.querySelectorAll('#settingsModal .modal-servers li');
                // Highlight the server type if previous selection exists
                if (typeof localStorage.launcherType !== 'undefined') {
                  for (var i = 0; i < launcherTypeElements.length; i++) {
                    launcherTypeElements[i].classList.remove('active');
                    if ( launcherTypeElements[i].classList.contains(localStorage.launcherType) ) {
                      launcherTypeElements[i].classList.add('active');
                    }
                  }
                }
                // Highlight server type on click and set local storage value
                for (var i = 0; i < launcherTypeElements.length; i++) {
                  launcherTypeElements[i].addEventListener('click', function() {
                    for (var j = 0; j < launcherTypeElements.length; j++) {
                      launcherTypeElements[j].classList.remove('active');
                    }
                    this.classList.add('active');
                    if ( this.classList.contains('launcher-private') ) {
                      localStorage.launcherType = 'launcher-private';
                    } else if ( this.classList.contains('launcher-public') ) {
                      localStorage.launcherType = 'launcher-public';
                    }
                    setLaunchServer();
                  })
                }
                const launcherPublic = document.getElementById('launcher-public-input');
                const launcherPrivate = document.getElementById('launcher-private-input');
                const pageName = "getting_started_julia/fundamental_types";
                const repoURL = "https://github.com/QuantEcon/lecture-julia.notebooks";
                const urlPath = "tree/lecture-julia.notebooks/getting_started_julia/fundamental_types.ipynb";
                const branch = "main"
                const launchNotebookLink = document.getElementById('advancedLaunchButton');

                // Highlight public server option if previous selection exists
                if (typeof localStorage.launcherPublic !== 'undefined') {
                  launcherPublic.value = localStorage.launcherPublic;
                }
                // Update local storage upon public server selection
                launcherPublic.addEventListener('change', (event) => {
                  setLaunchServer();
                });
                // Populate private server input if previous entry exists
                if (typeof localStorage.launcherPrivate !== 'undefined') {
                  launcherPrivate.value = localStorage.launcherPrivate;
                }
                // Update local storage when a private server is entered
                launcherPrivate.addEventListener('input', (event) => {
                  setLaunchServer();
                });

                // Function to update the "Launch Notebook" link href
                function setLaunchServer() {
                  launchNotebookLink.removeAttribute("style")
                  if ( localStorage.launcherType == 'launcher-private' ) {
                    let repoPrefix = "/jupyter/hub/user-redirect/git-pull?repo=" + repoURL + "&branch=" + branch + "&urlpath=" + urlPath;
                    launcherPrivateValue = launcherPrivate.value
                    if (!launcherPrivateValue) {
                        launchNotebookLink.removeAttribute("href")
                        launchNotebookLink.style.background = "grey"
                        return
                    }
                    localStorage.launcherPrivate = launcherPrivateValue;
                    privateServer = localStorage.launcherPrivate.replace(/\/$/, "")
                    if (!privateServer.includes("http")) {
                        privateServer = "http://" + privateServer
                    }
                    launchNotebookLinkURL = privateServer + repoPrefix;
                  } else if ( localStorage.launcherType == 'launcher-public' ) {
                    launcherPublicValue = launcherPublic.options[launcherPublic.selectedIndex].value;
                    localStorage.launcherPublic = launcherPublicValue;
                    launchNotebookLinkURL = localStorage.launcherPublic;
                  }
                  if (launchNotebookLinkURL) launchNotebookLink.href = launchNotebookLinkURL;
                }
                // Check if user has previously selected a server
                if ( (typeof localStorage.launcherPrivate !== 'undefined') || (typeof localStorage.launcherPublic !== 'undefined') ) {
                  setLaunchServer();
                }
                </script>

        </div>

    </div> <!-- .wrapper-->
    
<script async="" src="https://www.google-analytics.com/analytics.js"></script>
<script>
                        window.ga = window.ga || function () {
                            (ga.q = ga.q || []).push(arguments) };
                        ga.l = +new Date;
                        ga('create', 'UA-54984338-8', 'auto');
                        ga('set', 'anonymizeIp', true);
                        ga('send', 'pageview');
                    </script>

  </body>
</html>